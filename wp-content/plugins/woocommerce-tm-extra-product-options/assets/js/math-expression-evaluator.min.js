!function(t){"use strict";function e(t,e){var a;for(a=0;a<t.length;a++)t[a]+=e;return t}function a(t,e,a,n){var h;for(h=0;h<n;h++)if(t[a+h]!==e[h])return!1;return!0}function n(t){var e,n,r,f,v,c=[],y=t.length;for(f=0;f<y;f++)if(!(f<y-1&&" "===t[f]&&" "===t[f+1])){for(e="",n=t.length-f>s.length-2?s.length-1:t.length-f;n>0;n--)if(void 0!==s[n])for(r=0;r<s[n].length;r++)a(t,s[n][r],f,n)&&(e=s[n][r],r=s[n].length,n=0);if(f+=e.length-1,""===e)throw new h.Exception("Can't understand after "+t.slice(f));v=o.indexOf(e),c.push({index:v,token:e,type:i[v],eval:u[v],precedence:l[i[v]],show:p[v]})}return c}var h=function(t){this.value=t},o=["round","ceil","floor","abs","exp","sqrt","sin","cos","tan","pi","(",")","P","C"," ","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],p=["round","ceil","floor","abs","exp","sqrt","sin","cos","tan","&pi;","(",")","P","C"," ","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],u=[],s=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," "],["pi","ln","Pi"],["round","ceil","floor","abs","exp","sqrt","sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]],i=[0,0,0,0,0,0,0,0,0,3,4,5,10,10,14,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],l={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1},r={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0},f={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},v={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},c={},y={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},g={1:!0};h.math={isDegree:!0,acos:function(t){return h.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,e){return t+e},asin:function(t){return h.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return h.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,e){var a,n=1,o=t-e,p=e;for(p<o&&(p=o,o=e),a=p+1;a<=t;a++)n*=a;return n/h.math.fact(o)},changeSign:function(t){return-t},cos:function(t){return h.math.isDegree&&(t=h.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,e){return t/e},fact:function(t){var e,a;if(t%1!=0)return"NaN";for(e=1,a=2;a<=t;a++)e*=a;return e},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,e){return t%e},mul:function(t,e){return t*e},P:function(t,e){var a,n=1;for(a=Math.floor(t)-Math.floor(e)+1;a<=Math.floor(t);a++)n*=a;return n},Pi:function(t,e,a){var n,h=1;for(n=t;n<=e;n++)h*=Number(a.postfixEval({n:n}));return h},pow10x:function(t){for(var e=1;t--;)e*=10;return e},sigma:function(t,e,a){var n,h=0;for(n=t;n<=e;n++)h+=Number(a.postfixEval({n:n}));return h},sin:function(t){return h.math.isDegree&&(t=h.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,e){return t-e},tan:function(t){return h.math.isDegree&&(t=h.math.toRadian(t)),Math.tan(t)},tanh:function(t){return h.sinha(t)/h.cosha(t)},toRadian:function(t){return t*Math.PI/180}},u=[Math.round,Math.ceil,Math.floor,Math.abs,Math.exp,Math.sqrt,h.math.sin,h.math.cos,h.math.tan,"PI","(",")",h.math.P,h.math.C," ".anchor,h.math.asin,h.math.acos,h.math.atan,"7","8","9",Math.floor,h.math.cosh,h.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",h.math.div,h.math.fact,h.math.tanh,h.math.atanh,h.math.mod,"1","2","3",h.math.mul,h.math.sinh,h.math.asinh,"E",h.math.log,"0",".",h.math.add,h.math.sub,",",h.math.sigma,"n",h.math.Pi,Math.pow],h.prototype.formulaEval=function(){var t,e,a,n,h=[],o=this.value;for(n=0;n<o.length;n++)1===o[n].type||3===o[n].type?h.push({value:3===o[n].type?o[n].show:o[n].value,type:1}):13===o[n].type?h.push({value:o[n].show,type:1}):0===o[n].type?h[h.length-1]={value:o[n].show+("-"!==o[n].show?"(":"")+h[h.length-1].value+("-"!==o[n].show?")":""),type:0}:7===o[n].type?h[h.length-1]={value:(1!==h[h.length-1].type?"(":"")+h[h.length-1].value+(1!==h[h.length-1].type?")":"")+o[n].show,type:7}:10===o[n].type?(t=h.pop(),e=h.pop(),"P"===o[n].show||"C"===o[n].show?h.push({value:"<sup>"+e.value+"</sup>"+o[n].show+"<sub>"+t.value+"</sub>",type:10}):h.push({value:(1!==e.type?"(":"")+e.value+(1!==e.type?")":"")+"<sup>"+t.value+"</sup>",type:1})):2===o[n].type||9===o[n].type?(t=h.pop(),e=h.pop(),h.push({value:(1!==e.type?"(":"")+e.value+(1!==e.type?")":"")+o[n].show+(1!==t.type?"(":"")+t.value+(1!==t.type?")":""),type:o[n].type})):12===o[n].type&&(t=h.pop(),e=h.pop(),a=h.pop(),h.push({value:o[n].show+"("+a.value+","+e.value+","+t.value+")",type:12}));return h[0].value},h.addToken=function(t){var e,a,n,h;for(e=0;e<t.length;e++){for(a=t[e].token.length,n=-1,s[a]=s[a]||[],h=0;h<s[a].length;h++)if(t[e].token===s[a][h]){n=o.indexOf(s[a][h]);break}-1===n?(o.push(t[e].token),i.push(t[e].type),s.length<=t[e].token.length&&(s[t[e].token.length]=[]),s[t[e].token.length].push(t[e].token),u.push(t[e].value),p.push(t[e].show)):(o[n]=t[e].token,i[n]=t[e].type,u[n]=t[e].value,p[n]=t[e].show)}},h.lex=function(t,a){var o,p,u,s,i,l,m,w,d,M={value:h.math.changeSign,type:0,pre:21,show:"-"},x={value:")",show:")",type:5,pre:0},E={value:"(",type:4,pre:0,show:"("},P=[E],b=[],k=r,D=0,I=c,C="",q={},S=n(t);for(void 0!==a&&h.addToken(a),o=0;o<S.length;o++)if(14!==(d=S[o]).type){for(p=d.token,u=d.type,s=d.eval,i=d.precedence,l=d.show,m=P[P.length-1],w=b.length;w--&&0===b[w];)if(-1!==[0,2,3,4,5,9,11,12,13].indexOf(u)){if(!0!==k[u])throw new h.Exception(p+" is not allowed after "+C);P.push(x),k=f,I=y,e(b,-1).pop()}if(!0!==k[u])throw new h.Exception(p+" is not allowed after "+C);if(!0===I[u]&&(u=2,s=h.math.mul,l="&times;",i=3,o-=p.length),q={value:s,type:u,pre:i,show:l},0===u)k=r,I=c,e(b,2).push(2),P.push(q),P.push(E);else if(1===u)1===m.type?(m.value+=s,e(b,1)):P.push(q),k=f,I=v;else if(2===u)k=r,I=c,e(b,2),P.push(q);else if(3===u)P.push(q),k=f,I=y;else if(4===u)e(b,1),D++,k=r,I=c,P.push(q);else if(5===u){if(!D)throw new h.Exception("Closing parenthesis are more than opening one, wait What!!!");D--,k=f,I=y,P.push(q),e(b,1)}else if(6===u){if(m.hasDec)throw new h.Exception("Two decimals are not allowed in one number");1!==m.type&&(m={value:0,type:1,pre:0},P.push(m),e(b,-1)),k=g,e(b,1),I=c,m.value+=s,m.hasDec=!0}else 7===u&&(k=f,I=y,e(b,1),P.push(q));8===u?(k=r,I=c,e(b,4).push(4),P.push(q),P.push(E)):9===u?(9===m.type?m.value===h.math.add?(m.value=s,m.show=l,e(b,1)):m.value===h.math.sub&&"-"===l&&(m.value=h.math.add,m.show="+",e(b,1)):5!==m.type&&7!==m.type&&1!==m.type&&3!==m.type&&13!==m.type?"-"===p&&(k=r,I=c,e(b,2).push(2),P.push(M),P.push(E)):(P.push(q),e(b,2)),k=r,I=c):10===u?(k=r,I=c,e(b,2),P.push(q)):11===u?(k=r,I=c,P.push(q)):12===u?(k=r,I=c,e(b,6).push(6),P.push(q),P.push(E)):13===u&&(k=f,I=y,P.push(q)),e(b,-1),C=p}else if(o>0&&o<S.length-1&&1===S[o+1].type&&(1===S[o-1].type||6===S[o-1].type))throw new h.Exception("Unexpected Space");for(w=b.length;w--&&0===b[w];)P.push(x),e(b,-1).pop();if(!0!==k[5])throw new h.Exception("complete the expression");for(;D--;)P.push(x);return P.push(x),new h(P)},h.Exception=function(t){this.message=t},h.prototype.toPostfix=function(){var t,e,a,n,o,p,u,s=[],i=[{value:"(",type:4,pre:0}],l=this.value;for(p=1;p<l.length;p++)if(1===l[p].type||3===l[p].type||13===l[p].type)1===l[p].type&&(l[p].value=Number(l[p].value)),s.push(l[p]);else if(4===l[p].type)i.push(l[p]);else if(5===l[p].type)for(;4!==(e=i.pop()).type;)s.push(e);else if(11===l[p].type){for(;4!==(e=i.pop()).type;)s.push(e);i.push(e)}else if(t=l[p],n=t.pre,o=i[i.length-1],a=o.pre,u="Math.pow"===o.value&&"Math.pow"===t.value,n>a)i.push(t);else{for(;a>=n&&!u||u&&n<a;)e=i.pop(),o=i[i.length-1],s.push(e),a=o.pre,u="Math.pow"===t.value&&"Math.pow"===o.value;i.push(t)}return new h(s)},h.prototype.postfixEval=function(t){var e,a,n,o,p,u,s;for((t=t||{}).PI=Math.PI,t.E=Math.E,e=[],p=this.value,u=void 0!==t.n,s=0;s<p.length;s++)1===p[s].type?e.push({value:p[s].value,type:1}):3===p[s].type?e.push({value:t[p[s].value],type:1}):0===p[s].type?void 0===e[e.length-1].type?e[e.length-1].value.push(p[s]):e[e.length-1].value=p[s].value(e[e.length-1].value):7===p[s].type?void 0===e[e.length-1].type?e[e.length-1].value.push(p[s]):e[e.length-1].value=p[s].value(e[e.length-1].value):8===p[s].type?(a=e.pop(),n=e.pop(),e.push({type:1,value:p[s].value(n.value,a.value)})):10===p[s].type?(a=e.pop(),void 0===(n=e.pop()).type?(n.value=n.concat(a),n.value.push(p[s]),e.push(n)):void 0===a.type?(a.unshift(n),a.push(p[s]),e.push(a)):e.push({type:1,value:p[s].value(n.value,a.value)})):2===p[s].type||9===p[s].type?(a=e.pop(),void 0===(n=e.pop()).type?((n=n.concat(a)).push(p[s]),e.push(n)):void 0===a.type?(a.unshift(n),a.push(p[s]),e.push(a)):e.push({type:1,value:p[s].value(n.value,a.value)})):12===p[s].type?(void 0!==(a=e.pop()).type&&(a=[a]),n=e.pop(),o=e.pop(),e.push({type:1,value:p[s].value(o.value,n.value,new h(a))})):13===p[s].type&&(u?e.push({value:t[p[s].value],type:3}):e.push([p[s]]));if(e.length>1)throw new h.exception("Uncaught Syntax error");return e[0].value>1e15?"Infinity":parseFloat(e[0].value.toFixed(15))},h.eval=function(t,e,a){return void 0===e?this.lex(t).toPostfix().postfixEval():void 0===a?void 0!==e.length?this.lex(t,e).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(e):this.lex(t,e).toPostfix().postfixEval(a)},t.tcmexp=h}(window);