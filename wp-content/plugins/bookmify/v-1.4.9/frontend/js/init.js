!function(e){"use strict";var t=bookmifyConfig,i={serviceID:"",serviceName:"",employeeID:"",extras:[],date:"",time:"",customerExist:"",preloader:"",servicePrice:0,extrasPrice:0,serviceDuration:0,extrasDuration:0,peopleCount:0,capacityMax:"",haveExtras:"",details:{},html:"",dateLocalFormat:"",extraContent:"",daysOff:"",detailsInfo:"",customFieldsFooter:"",timezoneOffset:"",tax:0,paymentInfo:"",taxObj:"",taxSumm:0,totalPrice:0,safeServicesList:[],safeEmployeesList:[],safeExtrasList:[],deposit:100,depositSelected:"no",defaultPaymentType:"",companyName:"",paymentSectionAction:"",availableDates:[],availableTimeSlots:[],waitForTimeSlots:0},a={janNameInLocal:e(".bookmify_be_months_hidden").find(".jan").val(),febNameInLocal:e(".bookmify_be_months_hidden").find(".feb").val(),marNameInLocal:e(".bookmify_be_months_hidden").find(".mar").val(),aprNameInLocal:e(".bookmify_be_months_hidden").find(".apr").val(),mayNameInLocal:e(".bookmify_be_months_hidden").find(".may").val(),junNameInLocal:e(".bookmify_be_months_hidden").find(".jun").val(),julNameInLocal:e(".bookmify_be_months_hidden").find(".jul").val(),augNameInLocal:e(".bookmify_be_months_hidden").find(".aug").val(),sepNameInLocal:e(".bookmify_be_months_hidden").find(".sep").val(),octNameInLocal:e(".bookmify_be_months_hidden").find(".oct").val(),novNameInLocal:e(".bookmify_be_months_hidden").find(".nov").val(),decNameInLocal:e(".bookmify_be_months_hidden").find(".dec").val(),defaultOption:e(".bookmify_be_months_hidden").find(".def").val()},o={iaoAlertTime:"5000",iaoAlertPosition:"bottom-right",alertSuccessIcon:'<span class="icon_holder success"><i class="xcon-ok"></i></span>',alertWarningIcon:'<span class="icon_holder warning"><i class="xcon-attention-alt"></i></span>',durationText:t.durationText,nextText:t.nextText,onSiteText:t.onSiteText,paypalText:t.paypalText,stripeText:t.stripeText,errorField:t.errorField,invalidEmail:t.invalidEmail,invalidPhone:t.invalidPhone,invalidEmailPhone:t.invalidEmailPhone,noExtras:t.noExtras,extras:t.extras,invalidLogin:t.invalidLogin,ajaxurl:t.ajaxUrl,stripePKey:t.stripePKey,stripeON:t.stripeON,paypalON:t.paypalON,timezone:t.timezone,currencyIcon:t.currencyIcon,currencyFormat:t.currencyFormat,currencyPosition:t.currencyPosition,priceFormat:t.priceFormat,priceDecimal:t.priceDecimal,doneText:t.doneText,timeSlotsText:t.timeSlotsText,init:function(){this.imgToSvg(),this.alphaServiceSelect()},imgToSvg:function(){e("img.bookmify_fe_svg").each(function(){var t=e(this),i=t.attr("class"),a=t.attr("src");e.get(a,function(a){var o=e(a).find("svg");void 0!==i&&(o=o.attr("class",i+" replaced-svg")),o=o.removeAttr("xmlns:a"),t.replaceWith(o)},"xml")})},categoryFilter:function(t){var i=t.find("h3.bookmify_fe_alphafilter .d_text"),a=t.find(".bookmify_fe_alphafilter_dd"),o=a.find(".bookmify_fe_alphafilter_dd_list"),s=a.find(".bookmify_fe_alphafilter_dd_list > span");o.length&&new PerfectScrollbar(".bookmify_fe_alphafilter_dd_list",{suppressScrollX:!0,wheelSpeed:.5,wheelPropagation:!0}),s.on("click",function(){var a=e(this),o=parseInt(a.data("id")),n=a.text();a.hasClass("active")||(s.removeClass("active"),a.addClass("active"),0!==o?(t.find("ul.bookmify_fe_list li[data-category-id!="+o+"]").slideUp(),t.find("ul.bookmify_fe_list li[data-category-id="+o+"]").slideDown()):t.find("ul.bookmify_fe_list li").slideDown(),i.text(n))})},openDD:function(t){var a=this,o=t.find(".bookmify_fe_dropdown"),s=t.find(".bookmify_fe_price_deposit .payment_wrap span.total_result"),n=o.find(".bookmify_fe_dd_item"),r=t.find(".submit_holder .bookmify_fe_approve_button"),l=t.find(".bookmify_fe_main_list_item.payment_holder .deposit_wrap"),f=l.find(".deposit_item"),d=t.find(".bookmify_fe_main_list_item.payment_holder .item_result");f.on("click",function(){var t=e(this);t.hasClass("deposit_selected")||t.parent().hasClass("close")||(f.removeClass("deposit_selected"),f.find(".req").removeAttr("checked"),t.addClass("deposit_selected"),t.find(".req").attr("checked","checked"),0===t.index()?i.depositSelected="no":i.depositSelected="yes")}),o.length&&(s.off().on("click",function(e){e.stopPropagation(),e.preventDefault(),o.hasClass("opened")?o.removeClass("opened"):o.addClass("opened")}),n.off().on("click",function(t){t.stopPropagation();var f=e(this),_="";if(!f.hasClass("active")){switch(r.removeClass("enabled"),n.removeClass("active"),f.addClass("active"),f.data("id")){case"on-site":_=a.onSiteText,e(r[0]).addClass("enabled"),l.slideUp(300),i.defaultPaymentType="local";break;case"paypal":_=a.paypalText,e(r[1]).addClass("enabled"),100!==i.deposit&&l.slideDown(300),i.defaultPaymentType="paypal";break;case"stripe":_=a.stripeText,e(r[2]).addClass("enabled"),100!==i.deposit&&l.slideDown(300),i.defaultPaymentType="stripe"}s.find(".t_text").text(_),d.html(_+" / "+a.integerToPriceFormatFunction(i.totalPrice))}o.removeClass("opened")}),e(window).on("click",function(){o.removeClass("opened")}),o.on("click",function(e){e.stopPropagation(),e.preventDefault()}))},alphaServiceSelect:function(){var t=e(".bookmify_fe_alpha"),a=this;t.each(function(){var t=e(this),o=t.find("ul.bookmify_fe_list li"),s=t.find(".bookmify_fe_main_list"),n=new TimelineMax({paused:!0,reversed:!1,onComplete:function(){o.removeClass("clicked"),_.hasClass("back_to_services")?_.removeClass("back_to_services"):(o.addClass("abs"),s.removeClass("abs"),t.removeClass("await").addClass("step_2"),f.play(),d.play(),setTimeout(function(){_.addClass("back_to_services")},500));a.alphaApprove(t)}}),r=new TimelineMax({paused:!0,reversed:!1}),l=new TimelineMax({paused:!0,reversed:!1}),f=new TimelineMax({paused:!0,reversed:!1}),d=new TimelineMax({paused:!0,reversed:!1}),_=t.find(".bookmify_fe_app_header"),m=_.find("h3.choose"),c=_.find("h3.back_to"),p=_.find(".span_bg"),h=t.find("script.script_services_list");i.safeServicesList=e.parseJSON(h.html()),i.companyName=t.find(".bf_cname").val(),t.find(".bookmify_fe_service_list").length&&(t.find(".bookmify_fe_service_list").find(".ps__rail-x").remove(),t.find(".bookmify_fe_service_list").find(".ps__rail-y").remove(),new PerfectScrollbar(".bookmify_fe_service_list",{suppressScrollX:!0,wheelSpeed:.5,wheelPropagation:!0}));var u=o.length,v=-.15;u>10&&(v=-parseFloat(1.5/u)),n.staggerTo(o,.3,{y:20,opacity:0,ease:Expo.ease},v),r.fromTo(m,.5,{left:"0px",opacity:1,ease:Expo.ease},{left:"20px",opacity:0,ease:Expo.ease}),l.fromTo(c,.5,{left:"20px",opacity:0,ease:Expo.ease},{left:"0px",opacity:1,ease:Expo.ease,delay:.5}),f.fromTo(p,.5,{bottom:"0px",ease:Expo.ease},{bottom:"-40px",ease:Expo.ease,delay:0}),d.fromTo(s,1,{opacity:0,top:"40px",ease:Expo.ease},{opacity:1,top:"0px",ease:Expo.ease,delay:.5});var y=t.find(".bf_aptype").val(),b=t.find(".submit_holder .bookmify_fe_approve_button"),x=t.find(".bookmify_fe_main_list_item.payment_holder .deposit_wrap");i.defaultPaymentType=y,"stripe"===i.defaultPaymentType?(b.removeClass("enabled"),e(b[2]).addClass("enabled"),100!==i.deposit&&x.slideDown(300)):"paypal"===i.defaultPaymentType&&(b.removeClass("enabled"),e(b[1]).addClass("enabled"),100!==i.deposit&&x.slideDown(300));var k=t.find(".bf_psaction").val();"default"!==k&&(i.paymentSectionAction=k),t.find(".bookmify_fe_app_header").off().on("click",function(){return _.hasClass("back_to_services")&&(n.reversed(!n.reversed()),r.reversed(!r.reversed()),l.reversed(!l.reversed()),f.reversed(!f.reversed()),d.reversed(!d.reversed()),o.removeClass("abs"),s.addClass("abs"),t.find(".bookmify_fe_main_list_item").removeClass("closed step_closed").find(".item_result").attr("data-empty","empty"),t.find('.bookmify_fe_main_list_item:not("payment_holder") .item_footer').html(i.preloader),t.find(".bookmify_fe_main_list .service_holder .info_bottom h3").text(""),t.find(".bookmify_fe_main_list .service_holder .info_bottom p").text(""),t.find(".bookmify_fe_main_list .service_holder .info_top .img_holder").css({backgroundImage:"none"}),t.find(".item_footer").removeClass("opened").slideUp(),t.find(".bookmify_fe_main_list .extra_holder").remove(),t.find(".bookmify_fe_main_list .counter_holder").remove(),t.find(".bookmify_fe_main_list .details_holder").remove(),t.find(".item_result").text(""),t.find(".bookmify_fe_app .error_note").remove(),i.serviceID="",i.employeeID="",i.extras=[],i.date="",i.time="",i.customerExist="",i.servicePrice=0,i.extrasPrice=0,i.serviceDuration=0,i.extrasDuration=0,i.peopleCount=0,i.tax=0,i.totalPrice=0,i.taxSumm=0,i.details={},i.haveExtras="",i.serviceName="",i.customFieldsFooter="",t.find(".bookmify_fe_price_deposit .total_price").html(a.integerToPriceFormatFunction(0)),t.find(".bookmify_fe_price_deposit .full_price").html(a.integerToPriceFormatFunction(0)),t.find(".bookmify_fe_price_deposit .deposit_price").html(a.integerToPriceFormatFunction(0)),t.find(".bookmify_fe_price_total .price_service_sum").html(a.integerToPriceFormatFunction(0)),t.find(".bookmify_fe_price_total .price_total_sum").html(a.integerToPriceFormatFunction(0)),t.find(".price_wrap .total_price").html(a.integerToPriceFormatFunction(0)),t.find(".bookmify_fe_main_list_item.payment_holder").find(".total_item.extras_item").removeClass("close_div")),_.removeClass("back_to_services"),!1}),a.categoryFilter(t),o.off().on("click",function(){var o=e(this),s=o.index(),f=i.safeServicesList[s].id,d=o.closest(".bookmify_fe_list_item"),_=i.safeServicesList[s].title,m=i.safeServicesList[s].info,c=i.safeServicesList[s].duration_html,p=i.safeServicesList[s].img_url||"",h=o.closest(".bookmify_fe_alpha");if(""===i.html&&(i.html=h.html()),i.serviceDuration=parseInt(i.safeServicesList[s].duration_sec),d.addClass("clicked"),i.serviceName=_,t.find(".bookmify_fe_main_list_item.service_holder .info_bottom h3").text(_),t.find(".bookmify_fe_main_list_item.service_holder .info_bottom p").text(a.durationText+": "+c),t.find(".bookmify_fe_main_list_item.service_holder .info_top .img_holder").css({backgroundImage:"url("+p+")"}),t.find(".bookmify_fe_main_list_item.service_holder .info_bottom span").length&&t.find(".bookmify_fe_main_list_item.service_holder .info_bottom span").html(m),i.detailsInfo=t.find(".bf_details_info").html(),t.find(".bookmify_fe_main_list_item.customer_holder").find(".item_footer").html(i.detailsInfo),a.movingPlaceholders(),t.find(".bookmify_fe_main_list_item.specialist_holder").find(".item_footer").slideDown().addClass("opened"),!t.hasClass("await")){t.addClass("await"),i.serviceID=f;var u={action:"ajaxQueryGetEmployeeList",bookmify_data:i.serviceID,employeeIDs:t.find(".bf_efids").val(),locationIDs:t.find(".bf_lfids").val()};i.preloader=t.find(".bookmify_fe_main_list_item.specialist_holder .item_footer").html(),e.ajax({type:"POST",url:a.ajaxurl,cache:!1,data:u,success:function(o){var s=e.parseJSON(o);console.log(s),t.find(".bookmify_fe_main_list_item.specialist_holder").after(s.html2),i.tax=parseFloat(s.html8),i.taxObj=s.html9,i.paymentInfo=s.html10,t.find(".bookmify_fe_main_list_item.payment_holder").find(".item_footer").html(i.paymentInfo),""===s.html3&&t.find(".bookmify_fe_main_list_item.payment_holder").find(".total_item.extras_item").addClass("close_div"),a.openDD(t),i.extraContent=s.html3,t.find(".bookmify_fe_main_list_item.customer_holder").after(s.html4),i.customFieldsFooter=s.html5;var n=parseInt(s.html6),r=s.html7;if(1===n&&"default"!==r){var l=t.find(".bookmify_fe_main_list_item.specialist_holder");l.find(".item_footer").html(s.html),"remove"===r?l.slideUp():l.find(".item_footer").slideUp();var f=t.find("script.script_employees_list");i.safeEmployeesList=e.parseJSON(f.html()),f.html("");var d=t.find("script.script_extras_list");i.safeExtrasList=e.parseJSON(d.html()),d.html("");var _=t.find(".bookmify_fe_main_list_item.specialist_holder .item_footer label").closest(".bookmify_fe_radio_item"),m=i.safeEmployeesList[0].id,c=parseFloat(i.safeEmployeesList[0].price),p=parseInt(i.safeEmployeesList[0].cap_max),h=parseInt(i.safeEmployeesList[0].deposit),u=i.safeEmployeesList[0].name;i.employeeID=m,i.servicePrice=c,i.capacityMax=p,i.deposit=h,100===i.deposit?t.find(".bookmify_fe_price_deposit .deposit_wrap").addClass("close"):t.find(".bookmify_fe_price_deposit .deposit_wrap").removeClass("close");var v=_.closest(".bookmify_fe_main_list_item"),y=v.index(),b=t.find(".bookmify_fe_main_list_item:nth-child("+(y+2)+")");l.find(".item_result").attr("data-empty","full"),l.find(".item_result").html(u),l.addClass("closed"),i.taxSumm=0;var x=i.taxObj.length;if(x)for(var k=0;k<x;k++){var g=i.taxObj[k].id,C=i.taxObj[k].rate,T=Math.floor(c*C)/100;i.taxSumm+=T,t.find('.service_item .total_item_sub[data-id="'+g+'"] .right_part span').html(a.integerToPriceFormatFunction(T))}i.totalPrice=c+i.taxSumm;var P=a.integerToPriceFormatFunction(i.totalPrice);t.find(".bookmify_fe_price_total .price_service_sum").html(a.integerToPriceFormatFunction(c)),t.find(".bookmify_fe_price_total .price_total_sum").html(P),t.find(".price_wrap .total_price").html(P),t.find(".bookmify_fe_price_deposit .total_price").html(P),t.find(".bookmify_fe_price_deposit .full_price").html(P),t.find(".bookmify_fe_price_deposit .deposit_price").html(a.integerToPriceFormatFunction(Math.floor(i.totalPrice*i.deposit/100))),i.capacityMax>1&&(t.find(".bookmify_fe_main_list .counter_holder").length&&t.find(".bookmify_fe_main_list .counter_holder").remove(),v.after(t.find(".bf_people_count_section").html()),b=t.find(".bookmify_fe_main_list .counter_holder")),a.alphaJumpNextStep(b)}else t.find(".bookmify_fe_main_list_item.specialist_holder").slideDown(),t.find(".bookmify_fe_main_list_item.specialist_holder .item_footer").html(s.html),a.alphaChooseEmployee(t);a.imgToSvg()},error:function(e,t,i){console.log(i),console.log(t),console.log(e)}}),n.play(),r.play(),l.play()}}),a.paypalApprove(t),a.stripeApprove(t)})},alphaChooseEmployee:function(t){var a=this,o=t.find(".radio_inner label"),s=t.find("script.script_employees_list");i.safeEmployeesList=e.parseJSON(s.html()),s.html("");var n=t.find("script.script_extras_list");i.safeExtrasList=e.parseJSON(n.html()),n.html(""),o.off().on("click",function(){var o=e(this),s=o.closest("li").index(),n=o.closest(".bookmify_fe_radio_item"),r=i.safeEmployeesList[s].id,l=i.safeEmployeesList[s].name,f=parseFloat(i.safeEmployeesList[s].price),d=parseInt(i.safeEmployeesList[s].cap_max),_=parseInt(i.safeEmployeesList[s].deposit),m=n.closest(".bookmify_fe_main_list_item"),c=m.index(),p=m.find(".bookmify_fe_alpha_next_button");i.employeeID=r,i.servicePrice=f,i.capacityMax=d,i.deposit=_,100===i.deposit?t.find(".bookmify_fe_price_deposit .deposit_wrap").addClass("close"):t.find(".bookmify_fe_price_deposit .deposit_wrap").removeClass("close"),i.taxSumm=0;var h=i.taxObj.length;if(h)for(var u=0;u<h;u++){var v=i.taxObj[u].id,y=i.taxObj[u].rate,b=Math.floor(f*y)/100;i.taxSumm+=b,t.find('.service_item .total_item_sub[data-id="'+v+'"] .right_part span').html(a.integerToPriceFormatFunction(b))}i.totalPrice=f+i.taxSumm;var x=a.integerToPriceFormatFunction(i.totalPrice);return t.find(".bookmify_fe_price_total .price_service_sum").html(a.integerToPriceFormatFunction(f)),t.find(".bookmify_fe_price_total .price_total_sum").html(x),t.find(".price_wrap .total_price").html(x),t.find(".bookmify_fe_price_deposit .total_price").html(x),t.find(".bookmify_fe_price_deposit .full_price").html(x),t.find(".bookmify_fe_price_deposit .deposit_price").html(a.integerToPriceFormatFunction(Math.floor(i.totalPrice*i.deposit/100))),n.find(".req").prop("checked",!0),p.removeClass("disabled"),a.alphaNextStep(c,l,t,p.find("a")),!1})},alphaNextStep:function(e,t,i,a,o,s){o=void 0!==o?o:"",s=void 0!==s?s:"";var n=i.find(".bookmify_fe_main_list_item:nth-child("+(e+1)+")");n.find(".item_result").attr("data-empty","full"),n.find(".item_result").html(t),n.addClass("closed");var r=i.find(".bookmify_fe_main_list_item:nth-child("+(e+2)+")");this.alphaDoNextStep(n,r,a,o,s)},alphaDoNextStep:function(e,t,a,o,s){var n=this,r=e.closest(".bookmify_fe_alpha");""===o?(a.parent().hasClass("input_wrapper")||a.parent().hasClass("sign_form_footer")||a.on("click",function(){return e.find(".item_footer").slideUp(500),setTimeout(function(){e.addClass("step_closed"),e.find(".item_footer").removeClass("opened"),n.alphaJumpToClosedItem(r)},500),t.hasClass("bottom_holder")||(e.hasClass("specialist_holder")&&i.capacityMax>1&&(r.find(".bookmify_fe_main_list .counter_holder").length&&r.find(".bookmify_fe_main_list .counter_holder").remove(),e.after(r.find(".bf_people_count_section").html()),t=r.find(".bookmify_fe_main_list .counter_holder")),n.alphaJumpNextStep(t)),!1}),""!==s&&(e.find(".item_footer").slideUp(500),setTimeout(function(){e.addClass("step_closed"),e.find(".item_footer").removeClass("opened"),n.alphaJumpToClosedItem(r)},500),n.alphaJumpNextStep(t))):(e.find(".item_footer").slideUp(500).removeClass("opened"),r.find(".submit_holder").removeClass("disabled"),e.addClass("step_closed"),n.alphaApprove(r),n.alphaJumpToClosedItem(r))},alphaJumpToClosedItem:function(t){var a=this;t.find(".step_closed").on("click",function(){var o=e(this),s=o.index();if(o.hasClass("step_closed")){o.removeClass("step_closed"),t.find(".bottom_holder .submit_holder").addClass("disabled");var n=t.find(".bookmify_fe_main_list .bookmify_fe_main_list_item").length;t.find(".bookmify_fe_main_list .item_footer").hasClass("opened")&&t.find(".bookmify_fe_main_list .item_footer.opened").slideUp().removeClass("opened");for(var r="",l=s+2;l<n;l++){var f=t.find(".bookmify_fe_main_list .bookmify_fe_main_list_item:nth-child("+l+")");f.hasClass("counter_holder")&&(r="yes"),f.removeClass("closed step_closed"),f.find(".item_result").attr("data-empty","empty"),f.find(".item_result").html(""),f.find('.bookmify_fe_main_list_item:not("payment_holder") .item_footer').html(i.preloader)}"yes"===r&&t.find(".bookmify_fe_main_list .counter_holder").remove(),t.find(".bookmify_fe_main_list_item.payment_holder .item_footer").removeClass("no_padding"),t.find(".bookmify_fe_main_list_item.payment_holder .bookmify_fe_alpha_next_button").removeClass("removable"),t.find(".bookmify_fe_main_list_item.payment_holder .bookmify_fe_price_total").slideDown(),t.find(".bookmify_fe_main_list_item.payment_holder .bookmify_fe_price_deposit").slideUp(),o.hasClass("specialist_holder")?(i.extras=[],i.date="",i.time="",i.customerExist="",i.extrasPrice=0,i.peopleCount=0,i.details={},i.haveExtras=""):o.hasClass("counter_holder")?(i.extras=[],i.date="",i.time="",i.customerExist="",i.extrasPrice=0,i.details={},i.haveExtras=""):o.hasClass("extra_holder")?(i.date="",i.time="",i.customerExist="",i.details={}):o.hasClass("date_holder")&&(i.customerExist="",i.details={}),i.taxSumm=0;var d=i.taxObj.length,_=i.extrasPrice,m=i.servicePrice*(i.peopleCount+1);if(d)for(var c=0;c<d;c++){var p=i.taxObj[c].id,h=i.taxObj[c].rate,u=Math.floor(m*h)/100,v=Math.floor(_*h)/100;i.taxSumm+=u,i.taxSumm+=v,t.find('.service_item .total_item_sub[data-id="'+p+'"] .right_part span').html(a.integerToPriceFormatFunction(u)),t.find('.extras_item .total_item_sub[data-id="'+p+'"] .right_part span').html(a.integerToPriceFormatFunction(v))}i.totalPrice=m+_+i.taxSumm;var y=a.integerToPriceFormatFunction(i.totalPrice);t.find(".bookmify_fe_price_total .price_service_sum").html(a.integerToPriceFormatFunction(m)),t.find(".bookmify_fe_price_total .price_extras_sum").html(a.integerToPriceFormatFunction(_)),t.find(".bookmify_fe_price_total .price_total_sum").html(y),t.find(".price_wrap .total_price").html(y),t.find(".bookmify_fe_price_deposit .total_price").html(y),t.find(".bookmify_fe_price_deposit .full_price").html(y),t.find(".bookmify_fe_price_deposit .deposit_price").html(a.integerToPriceFormatFunction(Math.floor(i.totalPrice*i.deposit/100))),o.find(".item_footer").addClass("opened").slideDown()}})},alphaTimeSelect:function(t){var a=this,o=t.find(".time_item"),s=o.closest(".bookmify_fe_alpha");o.off().on("click",function(){var t=e(this),n=t.find("span").html();o.removeClass("active"),t.addClass("active");var r=o.closest(".item_footer").find(".bookmify_fe_alpha_next_button"),l=o.closest(".bookmify_fe_main_list_item").index();r.removeClass("disabled"),i.time=t.find("input[type=hidden]").val(),a.alphaNextStep(l,i.dateLocalFormat+'<span class="app_time">'+n+"</span>",s,r.find("a"))})},signInUp:function(t){var a=this,o=t.find(".item_details"),s=t.find(".bookmify_fe_alpha_sign_in"),n=t.closest(".bookmify_fe_alpha"),r=s.find(".sign_form_footer .sign_in");o.find(".just_info p a").off().on("click",function(){return o.slideUp(),s.slideDown(),!1}),s.find(".sign_form_header p a").off().on("click",function(){return o.slideDown(),s.slideUp(),!1}),r.on("click",function(){var o=e(this),l=s.find(".input_login input").val(),f=s.find(".input_password input").val();if(s.find(".error_note").remove(),!o.hasClass("await")&&""!==l&&""!==f){o.addClass("await");var d={action:"ajaxCheckLoginCredentials",login:l,password:f};e.ajax({type:"POST",url:a.ajaxurl,cache:!1,data:d,success:function(l){var f=e.parseJSON(l);console.log(f);var d=f.result;if(o.removeClass("await"),"no"===d)s.append('<span class="error_note">'+a.invalidLogin+"</span>");else if("done"===d){var _=f.exist;i.customerExist=_;var m=t.index(),c=f.firstName+" "+f.lastName;i.details.first_name=f.firstName,i.details.last_name=f.lastName,i.details.email=f.email,i.details.phone="",i.details.message="",""===i.customFieldsFooter?a.alphaNextStep(m,c,n,r,i.paymentSectionAction,"asd"):a.alphaNextStep(m,c,n,r,"","asd")}},error:function(e,t,i){console.log(i),console.log(t),console.log(e)}})}return!1})},triggerPaymentMethodButtons:function(t){var a=t.find(".submit_holder .bookmify_fe_approve_button"),o=t.find(".bookmify_fe_main_list_item.payment_holder .deposit_wrap");"stripe"===i.defaultPaymentType?(a.removeClass("enabled"),e(a[2]).addClass("enabled"),100!==i.deposit&&o.slideDown(300)):"paypal"===i.defaultPaymentType&&(a.removeClass("enabled"),e(a[1]).addClass("enabled"),100!==i.deposit&&o.slideDown(300))},alphaJumpNextStep:function(t){var a=this,o=t.closest(".bookmify_fe_alpha");if(t.hasClass("extra_holder")&&(t.find(".item_footer").html(i.extraContent),a.imgToSvg(),t.find("label").off().on("click",function(){var i=e(this),o=i.closest(".bookmif_fe_extras_list_item"),s=i.find(".req"),n=o.find(".bookmify_fe_quantity");return s.is(":checked")?(s.prop("checked",!1),n.find("input").attr("disabled","disabled"),n.addClass("disabled"),o.removeClass("active")):(s.prop("checked",!0),n.removeClass("disabled"),o.addClass("active"),n.find("input").removeAttr("disabled")),a.alphaExtraQuantity(),a.alphaExtraValue(t),!1}),a.alphaExtraValue(t)),t.hasClass("payment_holder")&&(a.triggerPaymentMethodButtons(o),t.find(".bookmify_fe_alpha_next_button a").off().on("click",function(){var e=o.find(".bookmify_fe_main_list_item.payment_holder"),t=o.find(".bookmify_fe_price_deposit .payment_wrap .t_text").html(),i=o.find(".bookmify_fe_price_deposit .total_price").html();return e.find(".bookmify_fe_price_total").slideUp(),e.find(".bookmify_fe_price_deposit").slideDown(),o.find(".bookmify_fe_main_list_item.bottom_holder .submit_holder").removeClass("disabled"),e.find(".item_footer").addClass("no_padding").find(".bookmify_fe_alpha_next_button").addClass("removable"),e.addClass("closed"),e.find(".item_result").attr("data-empty","full"),e.find(".item_result").html(t+" / "+i),a.alphaApprove(o),a.alphaJumpToClosedItem(o),!1}),0===i.totalPrice&&"paypal"===i.defaultPaymentType?(o.find(".submit_holder > *").removeClass("enabled"),o.find(".submit_holder > *").first().addClass("enabled")):a.triggerPaymentMethodButtons(o)),t.hasClass("customer_holder")){t.find(".item_footer").html(i.detailsInfo),a.signInUp(t),a.movingPlaceholders();var s=t.find(".item_footer .input_done a");a.alphaDetailsDone(o,t,s)}if(t.hasClass("counter_holder")){var n=o.find(".bf_people_count_content").html();t.find(".item_footer").html(n),t.find("input.extra_quantity").attr("max",i.capacityMax-1),t.find("label").off().on("click",function(){var i=e(this),o=i.closest(".bookmif_fe_count_list_item"),s=i.find(".req"),n=o.find(".bookmify_fe_quantity");return s.is(":checked")?(s.prop("checked",!1),n.find("input").attr("disabled","disabled"),n.addClass("disabled"),o.removeClass("active")):(s.prop("checked",!0),n.removeClass("disabled"),o.addClass("active"),n.find("input").removeAttr("disabled")),a.alphaPeopleQuantity(),a.alphaPeopleValue(t),!1}),a.alphaPeopleValue(t)}t.hasClass("date_holder")&&(o.find(".bookmify_fe_main_list_item.date_holder .item_footer").html("").html(i.preloader),a.getTimeSlotsForPeriod(o));if(t.hasClass("details_holder")){t.find(".item_footer").html(i.customFieldsFooter),a.imgToSvg();var r=t.find(".required_cf"),l=r.length,f=t.index(),d=a.doneText,_=o;t.find(".cf_button a").off().on("click",function(){var o=0,s=e(this);return r.removeClass("danger"),l>0&&r.each(function(){var t=e(this);t.find(".bookmify_fe_cf_radiobox").length?0===t.find("input:checked").length&&(o++,t.addClass("danger")):t.find(".bookmify_fe_cf_select").length?0===t.find("select option:not(:first-child):selected").length&&(o++,t.addClass("danger")):t.find(".bookmify_fe_cf_checkbox").length?0===t.find("input:checked").length&&(o++,t.addClass("danger")):t.find(".bookmify_fe_cf_text").length?""===t.find("input").val()&&(o++,t.addClass("danger")):t.find(".bookmify_fe_cf_textarea").length&&""===t.find("textarea").val()&&(o++,t.addClass("danger"))}),0===o?a.alphaNextStep(f,d,_,s,i.paymentSectionAction,"asd"):e([document.documentElement,document.body]).animate({scrollTop:t.offset().top},500),!1})}t.find(".item_footer").slideDown(500),setTimeout(function(){t.find(".item_footer").addClass("opened")},500)},getTimeSlotsForPeriod:function(t){var a=this;if(1===i.waitForTimeSlots)return!1;i.waitForTimeSlots++;var o={action:"ajaxQueryGetTimeSlotsOfYear",serviceID:i.serviceID,employeeID:i.employeeID,extraDuration:i.extrasDuration,capacityMax:i.capacityMax,peopleCount:i.peopleCount,bookingDuration:i.serviceDuration+i.extrasDuration,timezoneOffset:(new Date).getTimezoneOffset()};e.ajax({type:"POST",url:a.ajaxurl,cache:!1,data:o,success:function(o){i.waitForTimeSlots=0;var s=e.parseJSON(o);console.log(s),i.availableDates=s.availableDates,i.availableTimeSlots=s.avaliableTimeSlots,i.timezoneOffset=s.timezoneOffset,a.getTimeSlotsForPeriodAjaxProcess(t)},error:function(e,t,i){console.log(i),console.log(t),console.log(e)}})},getTimeSlotsForPeriodAjaxProcess:function(t){var a=this,o=t.find(".bookmify_fe_main_list_item.date_holder .item_footer");o.html("").html('<div class="date_picker"></div><div class="bookmify_fe_alpha_next_button disabled"><a href="#">'+a.nextText+"</a></div>"),a.imgToSvg();var s=o.find(".date_picker");s.datepicker({firstDay:1,dateFormat:"yy-mm-dd",setDate:null,defaultDate:null}),s.datepicker("setDate",null),s.datepicker("option",{minDate:i.availableDates[0],maxDate:i.availableDates[i.availableDates.length-1],setDate:null,defaultDate:null,beforeShowDay:function(t){var a=e.datepicker.formatDate("yy-mm-dd",t);return-1!==e.inArray(a,i.availableDates)?[!0,"","Available"]:[!1,"","unAvailable"]},onSelect:function(e){i.date!==e&&(i.date=e,i.dateLocalFormat=a.wpDateToOptionDate(e),o.find(".bookmify_fe_alpha_next_button").addClass("disabled"),a.getTimeSlotsOfSelectedDayFromArray(t))}}),o.find(".date_picker .ui-state-active").removeClass("ui-state-active")},getTimeSlotsOfSelectedDayFromArray:function(e){var t=performance.now(),a=this;e.find(".bookmify_fe_main_list_item.date_holder .time_wrap").remove(),e.find(".bookmify_fe_main_list_item.date_holder .date_picker").after('<div class="time_wrap">'+i.preloader+"</div>");var o=e.find(".time_wrap");o.addClass("waiting");var s="",n="";if(s+='<div class="time_header">',s+="<h3>"+a.timeSlotsText+"</h3>",s+="</div>",i.date&&i.availableTimeSlots){var r=i.availableTimeSlots[i.date].length;if(s+='<div class="time_content" id="bokmify_fe_alpha_time_content"><ul>',r)for(var l=0;l<r;l++)n+='<li><div class="time_item">',n+='<input class="time_val" type="hidden" value="'+i.availableTimeSlots[i.date][l][1]+'" />',n+="<span>"+i.availableTimeSlots[i.date][l][0]+"</span>",n+="</div></li>";s+=n,s+="</ul></div>"}var f=performance.now();f-t<300?setTimeout(function(){o.html("").html(s),o.find(".time_content").length&&new PerfectScrollbar("#bokmify_fe_alpha_time_content",{suppressScrollX:!0,wheelSpeed:.5,wheelPropagation:!1}),a.alphaTimeSelect(o),o.removeClass("waiting")},300-(f-t)):(o.html("").html(s),o.find(".time_content").length&&new PerfectScrollbar("#bokmify_fe_alpha_time_content",{suppressScrollX:!0,wheelSpeed:.5,wheelPropagation:!1}),a.alphaTimeSelect(o),o.removeClass("waiting"))},alphaPeopleValue:function(t){var a=this,o="",s="",n=t.index(),r=t.closest(".bookmify_fe_alpha"),l=t.find(".bookmify_fe_alpha_next_button a");i.peopleCount=0,t.find(".bookmif_fe_count_list_item").each(function(){var t=e(this);if(t.hasClass("active")){var n=parseInt(t.find(".extra_quantity").val()),l=i.capacityMax;n+1>l&&(n=l-1,t.find(".extra_quantity").val(n)),o=n,i.peopleCount=n}i.taxSumm=0;var f=i.taxObj.length,d=i.extrasPrice,_=i.servicePrice*(i.peopleCount+1);if(f)for(var m=0;m<f;m++){var c=i.taxObj[m].id,p=i.taxObj[m].rate,h=Math.floor(_*p)/100,u=Math.floor(d*p)/100;i.taxSumm+=h,i.taxSumm+=u,r.find('.service_item .total_item_sub[data-id="'+c+'"] .right_part span').html(a.integerToPriceFormatFunction(h)),r.find('.extras_item .total_item_sub[data-id="'+c+'"] .right_part span').html(a.integerToPriceFormatFunction(u))}i.totalPrice=_+d+i.taxSumm;var v=a.integerToPriceFormatFunction(i.totalPrice);r.find(".bookmify_fe_price_total .price_service_sum").html(a.integerToPriceFormatFunction(_)),r.find(".bookmify_fe_price_total .price_extras_sum").html(a.integerToPriceFormatFunction(d)),r.find(".bookmify_fe_price_total .price_total_sum").html(v),r.find(".price_wrap .total_price").html(v),r.find(".bookmify_fe_price_deposit .total_price").html(v),r.find(".bookmify_fe_price_deposit .full_price").html(v),r.find(".bookmify_fe_price_deposit .deposit_price").html(a.integerToPriceFormatFunction(Math.floor(i.totalPrice*i.deposit/100))),s=""===o?0:o}),a.alphaNextStep(n,s,r,l)},alphaExtraValue:function(t){var a="",o="",s=t.index(),n=t.closest(".bookmify_fe_alpha"),r=t.find(".bookmify_fe_alpha_next_button a"),l="",f=t.find(".bookmif_fe_extras_list_item.active").length;i.extras=[],i.extrasPrice=0,i.extrasDuration=0,i.haveExtras="",f>0&&(i.haveExtras="yes"),t.find(".bookmif_fe_extras_list_item").each(function(){var t=e(this);if(t.hasClass("active")){var o=t.index(),s=i.safeExtrasList[o].title,n=parseInt(t.find(".extra_quantity").val()),r=i.safeExtrasList[o].max;n>r&&(n=r,t.find(".extra_quantity").val(n));var f=i.safeExtrasList[o].duration,d=i.safeExtrasList[o].price,_=i.safeExtrasList[o].id;a+='<span class="extra_item"><span class="extra_name">'+s+'</span><span class="extra_count">('+n+")</span></span>",l+=s+"("+n+") ",i.extras.push([_,n]),i.extrasPrice+=(i.peopleCount+1)*n*d,i.extrasDuration+=(i.peopleCount+1)*n*f}}),i.taxSumm=0;var d=i.taxObj.length,_=i.extrasPrice,m=i.servicePrice*(i.peopleCount+1);if(d)for(var c=0;c<d;c++){var p=i.taxObj[c].id,h=i.taxObj[c].rate,u=Math.floor(m*h)/100,v=Math.floor(_*h)/100;i.taxSumm+=u,i.taxSumm+=v,n.find('.service_item .total_item_sub[data-id="'+p+'"] .right_part span').html(this.integerToPriceFormatFunction(u)),n.find('.extras_item .total_item_sub[data-id="'+p+'"] .right_part span').html(this.integerToPriceFormatFunction(v))}i.totalPrice=m+_+i.taxSumm;var y=this.integerToPriceFormatFunction(i.totalPrice);n.find(".bookmify_fe_price_total .price_service_sum").html(this.integerToPriceFormatFunction(m)),n.find(".bookmify_fe_price_total .price_extras_sum").html(this.integerToPriceFormatFunction(_)),n.find(".bookmify_fe_price_total .price_total_sum").html(y),n.find(".price_wrap .total_price").html(y),n.find(".bookmify_fe_price_deposit .total_price").html(y),n.find(".bookmify_fe_price_deposit .full_price").html(y),n.find(".bookmify_fe_price_deposit .deposit_price").html(this.integerToPriceFormatFunction(Math.floor(i.totalPrice*i.deposit/100))),o=""===a?this.noExtras:'<span class="extra_items" title="'+l+'">'+a+"</span>",f>1&&(o='<div class="extra_items_dd"><span>'+f+" "+this.extras+'</span><div class="ei_dd"><div class="ei_dd_in"><span class="bf_triangle"><span></span></span>'+a+"</div></div></div>"),this.alphaNextStep(s,o,n,r)},alphaExtraQuantity:function(){var t=this;e(".bookmify_fe_main_list_item.extra_holder .bookmify_fe_quantity").each(function(){var i=e(this),a=i.find('input[type="number"]'),o=i.find(".increase"),s=i.find(".decrease"),n=a.attr("min"),r=a.attr("max"),l=i.closest(".bookmify_fe_main_list_item");i.hasClass("disabled")||(o.off().on("click",function(){var e,o=parseFloat(a.val());return o>=r?(e=o,!1):(e=o+1,i.find("input").val(e),i.find("input").trigger("change"),t.alphaExtraValue(l),!1)}),s.off().on("click",function(){var e,o=parseFloat(a.val());return o<=n?(e=o,!1):(e=o-1,i.find("input").val(e),i.find("input").trigger("change"),t.alphaExtraValue(l),!1)}))})},alphaPeopleQuantity:function(){var t=this;e(".bookmify_fe_main_list_item.counter_holder .bookmify_fe_quantity").each(function(){var i=e(this),a=i.find('input[type="number"]'),o=i.find(".increase"),s=i.find(".decrease"),n=a.attr("min"),r=a.attr("max"),l=i.closest(".bookmify_fe_main_list_item");i.hasClass("disabled")||(o.off().on("click",function(){var e,o=parseFloat(a.val());return o>=r?(e=o,!1):(e=o+1,i.find("input").val(e),i.find("input").trigger("change"),t.alphaPeopleValue(l),!1)}),s.off().on("click",function(){var e,o=parseFloat(a.val());return o<=n?(e=o,!1):(e=o-1,i.find("input").val(e),i.find("input").trigger("change"),t.alphaPeopleValue(l),!1)}))})},movingPlaceholders:function(){e(".bookmify_fe_moving_input").each(function(){var t=e(this),i=t.find("input, textarea");i.on("focus",function(){t.addClass("active"),t.find(".required_error").removeClass("required_error")}).on("blur",function(){""===i.val()&&t.removeClass("active")})})},alphaDetailsDone:function(t,a,o){var s=this;o.on("click",function(){if(!o.hasClass("loading")){o.addClass("loading");var n=t.find(".bookmify_fe_main_list_item.customer_holder"),r=n.find(".item_details .required_field"),l=0,f=0,d=0,_=0,m="",c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,p=[],h=",",u=n.find(".input_phone input");if(""!==u.val()&&(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\.\/0-9]{6,17}$/.test(u.val())||(u.parent().addClass("required_error"),_++,f++)),r.each(function(){var t=e(this),i=t.find("input,textarea");t.hasClass("input_email")&&(c.test(i.val())||(i.parent().addClass("required_error"),d++,f++)),""===i.val()&&(p.push(t.find(".moving_placeholder span").html()),i.parent().addClass("required_error"),l++,f++)}),e.each(p,function(e,t){e+1===l&&(h="."),m+="<span>"+t+h+"</span>"}),t.find(".item_row.input_done").find(".error_note").remove(),l>0?(t.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+s.errorField+m+"</span>"),o.removeClass("loading")):d>0&&0===_?(t.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+s.invalidEmail+"</span>"),o.removeClass("loading")):0===d&&_>0?(t.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+s.invalidPhone+"</span>"),o.removeClass("loading")):d>0&&_>0&&(t.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+s.invalidEmailPhone+"</span>"),o.removeClass("loading")),0===f){var v=a.index(),y=a.find(".input_first_name input").val(),b=a.find(".input_last_name input").val(),x=a.find(".input_email input").val(),k=a.find(".input_phone input").val(),g=a.find(".input_message textarea").val(),C=y+" "+b;i.details.first_name=y,i.details.last_name=b,i.details.email=x,i.details.phone=k,i.details.message=g;var T={action:"ajaxCheckCustomerDetails",firstName:y,lastName:b,email:x};e.ajax({type:"POST",url:s.ajaxurl,cache:!1,data:T,success:function(a){var n=e.parseJSON(a);console.log(n);var r=n.error,l=n.exist;i.customerExist=l,""===r?(o.removeClass("loading"),""===i.customFieldsFooter?s.alphaNextStep(v,C,t,o,i.paymentSectionAction,"asd"):s.alphaNextStep(v,C,t,o,"","asd")):(t.find(".item_row.input_done").find(".error_note").remove(),t.find(".item_row.input_email .input_wrapper").addClass("required_error"),t.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+n.error+"</span>"),o.removeClass("loading"))},error:function(e,t,i){console.log(i),console.log(t),console.log(e)}})}}return!1})},getCustomFields:function(t){var i={},a=t.find(".details_holder");if(a.length){var o=a.find(".bookmify_fe_cf_radiobox"),s=a.find(".bookmify_fe_cf_select"),n=a.find(".bookmify_fe_cf_checkbox"),r=a.find(".bookmify_fe_cf_text"),l=a.find(".bookmify_fe_cf_textarea");if(n.length){var f=[];n.each(function(){var t=e(this),i=t.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),a=[],o=[];e.each(t.find(".req:checked"),function(){var t=e(this).closest("label");a.push(t.index()),o.push(t.find(".count_title").text())}),f.push([i,a,o])}),i.checkbox=f}if(o.length){var d=[];o.each(function(){var t=e(this),i=t.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),a=t.find(".req:checked").closest("label").index(),o=t.find(".req:checked").closest("label").find(".e_name").text();d.push([i,a,o])}),i.radio=d}if(s.length){var _=[];s.each(function(){var t=e(this),i=t.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),a=t.find("option:selected").index(),o=t.find("option:selected").text();_.push([i,a,o])}),i.select=_}if(r.length){var m=[];r.each(function(){var t=e(this),i=t.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),a=t.find("input[type=text]").val();m.push([i,a])}),i.text=m}if(l.length){var c=[];l.each(function(){var t=e(this),i=t.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),a=e.trim(t.find("textarea").val());c.push([i,a])}),i.textarea=c}}return i},bookingLastStep:function(t,a,o){var s=this,n=s.getCustomFields(t),r=t.find(".bookmify_fe_app_in"),l=t.find(".bookmify_fe_success"),f=new TimelineLite,d=new TimelineLite,_=new TimelineLite,m=new TimelineLite,c=new TimelineLite,p=new TimelineLite,h={action:"ajaxCreateNewAppointment",serviceID:parseInt(i.serviceID),employeeID:parseInt(i.employeeID),date:i.date,time:i.time,extras:JSON.stringify(i.extras),details:JSON.stringify(i.details),duration:i.extrasDuration+i.serviceDuration,customerExist:i.customerExist,peopleCount:parseInt(i.peopleCount),haveExtras:i.haveExtras,customFields:JSON.stringify(n),timezoneOffset:i.timezoneOffset,paymentType:a};"paypal"===a&&(h.status=o.status),"paypal"!==a&&"stripe"!==a||(h.depositSelected=i.depositSelected,h.deposit=parseFloat(Math.floor(i.totalPrice*i.deposit/100))),e.ajax({type:"POST",url:s.ajaxurl,cache:!1,data:h,success:function(e){console.log(e),f.fromTo(l,.5,{left:"0px",opacity:0},{left:"0px",opacity:1},.5),d.fromTo(r,.5,{left:"0px"},{left:"0px",opacity:0}),setTimeout(function(){r.addClass("abs"),l.removeClass("abs").addClass("ready"),_.fromTo(l.find(".svg_holder"),.7,{bottom:"-20px",opacity:0},{bottom:"0px",opacity:1,ease:Sine.easeOut},.5),m.fromTo(l.find(".content_holder h3"),.7,{bottom:"-20px",opacity:0},{bottom:"0px",opacity:1,ease:Sine.easeOut},.7),c.fromTo(l.find(".content_holder p"),.7,{bottom:"-20px",opacity:0},{bottom:"0px",opacity:1,ease:Sine.easeOut},.9),p.fromTo(l.find(".success_content"),.7,{bottom:"-20px",opacity:0},{bottom:"0px",opacity:1,ease:Sine.easeOut},1.1)},500),s.alphaGetAlphaAgain(t)},error:function(e,t,i){console.log(i),console.log(t),console.log(e)}})},alphaApprove:function(t){var a=this;t.find(".submit_holder a.bookmify_fe_main_button").off().on("click",function(){var o=e(this);return o.parent().hasClass("disabled")||t.hasClass(o.hasClass("enabled"))||"local"!==i.defaultPaymentType||(t.addClass("last_step"),a.bookingLastStep(t,"local")),o.parent().hasClass("disabled")||t.hasClass(o.hasClass("enabled"))||"paypal"!==i.defaultPaymentType||0!==i.totalPrice||(t.addClass("last_step"),a.bookingLastStep(t,"local")),!1})},integerToPriceFormatFunction:function(e){var t,i,a,o,s=this.currencyIcon,n=this.currencyPosition,r=this.priceFormat,l=parseFloat(this.priceDecimal);switch(r){default:case"cd":a=".",o=",";break;case"dc":a=",",o=".";break;case"sd":a=".",o=" ";break;case"sc":a=",",o=" "}isNaN(l=Math.abs(l))&&(l=2),(i=(t=parseInt(e=(+e||0).toFixed(l))+"").length)>3?i%=3:i=0;var f=(i?t.substr(0,i)+o:"")+t.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+o)+(l?a+Math.abs(e-t).toFixed(l).replace(/-/,0).slice(2):"");switch(n){default:case"left":f=s+f;break;case"lspace":f=s+" "+f;break;case"right":f+=s;break;case"rspace":f=f+" "+s}return f},wpDateToOptionDate:function(e){var t=e.split("-"),i="",o="";switch(parseInt(t[1])){case 1:o=a.janNameInLocal;break;case 2:o=a.febNameInLocal;break;case 3:o=a.marNameInLocal;break;case 4:o=a.aprNameInLocal;break;case 5:o=a.mayNameInLocal;break;case 6:o=a.junNameInLocal;break;case 7:o=a.julNameInLocal;break;case 8:o=a.augNameInLocal;break;case 9:o=a.sepNameInLocal;break;case 10:o=a.octNameInLocal;break;case 11:o=a.novNameInLocal;break;case 12:o=a.decNameInLocal}switch(a.defaultOption){case"F d, Y":i=o+" "+t[2]+", "+t[0];break;case"d F, Y":i=t[2]+" "+o+", "+t[0];break;case"Y-m-d":i=t[0]+"-"+t[1]+"-"+t[2];break;case"m/d/y":i=t[1]+"/"+t[2]+"/"+t[0];break;case"d/m/y":i=t[2]+"/"+t[1]+"/"+t[0]}return i},alphaGetAlphaAgain:function(e){var t=this,a=new TimelineLite,o=new TimelineLite,s=e.find(".bookmify_fe_success");e.find(".bookmify_fe_success .success_footer a").off().on("click",function(){return o.fromTo(s,.5,{left:"0px"},{left:"0px",opacity:0}),setTimeout(function(){e.removeClass("last_step step_2"),e.html('<div class="bookmify_fe_removable_class">'+i.html+"</div>"),a.fromTo(e.find(".bookmify_fe_removable_class"),.5,{right:"0px",opacity:0},{right:"0px",opacity:1}),t.init()},500),setTimeout(function(){e.find(".bookmify_fe_removable_class").removeClass()},1e3),!1})},paypalApprove:function(t){var a,o=this;"on"===o.paypalON&&(a="yes"===i.depositSelected?parseFloat(Math.floor(i.totalPrice*i.deposit/100)):parseFloat(i.totalPrice),paypal.Buttons({style:{size:"responsive",color:"blue",shape:"pill",label:"checkout"},createOrder:function(e,t){return a="yes"===i.depositSelected?parseFloat(Math.floor(i.totalPrice*i.deposit/100)):parseFloat(i.totalPrice),t.order.create({purchase_units:[{amount:{value:a}}]})},onApprove:function(i,a){return a.order.capture().then(function(){var a={action:"ajaxQueryGetResponse",bookmify_data:i.orderID};e.ajax({type:"POST",url:o.ajaxurl,cache:!1,data:a,success:function(i){i=e.parseJSON(i),console.log(i),""!==i.status&&(t.addClass("last_step"),o.bookingLastStep(t,"paypal",i))},error:function(e,t,i){console.log(i),console.log(t),console.log(e)}})})}}).render(".bookmify_be_paypal_payment_button"))},stripeApprove:function(t){var a,o=this;"on"===o.stripeON&&(a="yes"===i.depositSelected?100*parseFloat(Math.floor(i.totalPrice*i.deposit/100)):100*parseFloat(i.totalPrice),o.handler=StripeCheckout.configure({key:o.stripePKey,image:"https://stripe.com/img/documentation/checkout/marketplace.png",locale:"auto",token:function(s){a="yes"===i.depositSelected?100*parseFloat(Math.floor(i.totalPrice*i.deposit/100)):100*parseFloat(i.totalPrice);var n={action:"ajaxQueryGetStripeToken",bookmify_stripeToken:s.id,serviceName:i.serviceName,appointmentPrice:a};e.ajax({type:"POST",url:o.ajaxurl,cache:!1,data:n,success:function(){""!==s.id&&(t.addClass("last_step"),o.bookingLastStep(t,"stripe"))},error:function(e,t,i){console.log(i),console.log(t),console.log(e)}})}}),e(".bookmify_be_stripe_payment_button").off().on("click",function(e){var a;return a="yes"===i.depositSelected?100*parseFloat(Math.floor(i.totalPrice*i.deposit/100)):100*parseFloat(i.totalPrice),0===i.totalPrice?(o.bookingLastStep(t,"local"),!1):(o.handler.open({name:i.companyName,description:i.serviceName,amount:a,currency:o.currencyFormat}),e.preventDefault(),!1)}),window.addEventListener("popstate",function(){o.handler.close()}))}};e(document).ready(function(){o.init()})}(jQuery);