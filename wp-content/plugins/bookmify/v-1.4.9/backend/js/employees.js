!function(e){"use strict";var a={days:[]},i={cloneForm:e(".bookmify_be_content .bookmify_be_popup_form_wrap").clone()},t={page:1,search:"",order:"ASC",text:"",orderClass:"order_asc",IDs:[]},o={janNameInLocal:e(".bookmify_be_months_hidden").find(".jan").val(),febNameInLocal:e(".bookmify_be_months_hidden").find(".feb").val(),marNameInLocal:e(".bookmify_be_months_hidden").find(".mar").val(),aprNameInLocal:e(".bookmify_be_months_hidden").find(".apr").val(),mayNameInLocal:e(".bookmify_be_months_hidden").find(".may").val(),junNameInLocal:e(".bookmify_be_months_hidden").find(".jun").val(),julNameInLocal:e(".bookmify_be_months_hidden").find(".jul").val(),augNameInLocal:e(".bookmify_be_months_hidden").find(".aug").val(),sepNameInLocal:e(".bookmify_be_months_hidden").find(".sep").val(),octNameInLocal:e(".bookmify_be_months_hidden").find(".oct").val(),novNameInLocal:e(".bookmify_be_months_hidden").find(".nov").val(),decNameInLocal:e(".bookmify_be_months_hidden").find(".dec").val(),defaultOption:e(".bookmify_be_months_hidden").find(".def").val()},n=bookmifyConfig,s={iaoAlertTime:"5000",iaoAlertPosition:"bottom-right",alertSuccessIcon:'<span class="icon_holder success"><i class="xcon-ok"></i></span>',alertWarningIcon:'<span class="icon_holder warning"><i class="xcon-attention-alt"></i></span>',deletedText:'<span class="text">'+n.deletedText+"</span>",updatedText:'<span class="text">'+n.updatedText+"</span>",addedText:'<span class="text">'+n.addedText+"</span>",noDateEnteredText:'<span class="text">'+n.noDateEnteredText+"</span>",noTitleEnteredText:'<span class="text">'+n.noTitleEnteredText+"</span>",errorField:'<span class="error_note">'+n.errorField+"</span>",invalidEmail:'<span class="error_note">'+n.invalidEmail+"</span>",employeeID:"",employeeAuthCode:"",cantDeleteEmployee:n.cantDeleteEmployee,ajaxurl:n.ajaxUrl,demoWpUserID:n.demoWpUserID,cacheElements:function(){this.cache={filterServiceList:e(".bookmify_be_services_filter_list"),filterServiceWrap:e(".bookmify_be_employees .bookmify_be_filter_list"),filterServiceInput:e(".bookmify_be_employees .bookmify_be_filter .filter_list"),filterServiceInputPlaceholder:e(".bookmify_be_employees .bookmify_be_filter .filter_list").attr("data-placeholder")}},init:function(){e(".bookmify_be_employees").length&&e(".bookmify_be_content .bookmify_be_popup_form_wrap").remove(),this.cacheElements(),this.openerEmployee(),this.insertEmployee(),this.imgToSvg(),this.deleteEmployee(),this.doFilter(),e.protip()},popperLocations:function(){var a=e(".nano.employee_locations"),i=e('body > .bookmify_be_popup_form_employee .location_wrap input[name="location"]'),t=i.siblings(".bot_btn");function o(){" "===i.val()||""===i.val()?t.removeClass("opened"):t.addClass("opened")}e(window).on("click",function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),a.on("click",function(e){e.stopPropagation()}),i.on("click",function(t){t.stopPropagation(),a.css({width:i.outerWidth()+"px"}),i.hasClass("input_clicked")?(e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")):(e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),i.addClass("input_clicked"),a.addClass("focused")),new Popper(i,a,{placement:"bottom-start",boundariesElement:"window",onUpdate:function(){a.css({width:i.outerWidth()+"px"})}}),a.find(".nano-content > div").on("click",function(a){a.stopPropagation();var t=e(this).html(),n=e(this).data("id");0===n?i.val(""):i.val(t),i.parent().find('input[type="hidden"]').val(n),o(),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),i.parent().removeClass("required_error"),i.parent().find(".error_note").remove()})}),a.css({width:i.outerWidth()+"px"}),t.on("click",function(){i.val(""),i.parent().find('input[type="hidden"]').val(""),t.removeClass("opened"),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),o()},popperWPUsers:function(){var a=e(".nano.wp_users"),i=e('body > .bookmify_be_popup_form_employee input[name="wp_user"]'),t=i.siblings(".bot_btn");function o(){" "===i.val()||""===i.val()?t.removeClass("opened"):t.addClass("opened")}e(window).on("click",function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),a.on("click",function(e){e.stopPropagation()}),i.on("click",function(t){t.stopPropagation(),a.css({width:i.outerWidth()+"px"}),i.hasClass("input_clicked")?(e("input").removeClass("input_clicked"),e(".nano").removeClass("focused")):(e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),i.addClass("input_clicked"),a.addClass("focused")),new Popper(i,a,{placement:"bottom-start",boundariesElement:"window",onUpdate:function(){a.css({width:i.outerWidth()+"px"})}}),a.find(".nano-content > div").on("click",function(a){a.stopPropagation();var t=e(this).html(),n=e(this).data("id");i.val(t),i.parent().find('input[type="hidden"]').val(n),o(),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),i.parent().removeClass("required_error"),i.parent().find(".error_note").remove()})}),a.css({width:i.outerWidth()+"px"}),t.on("click",function(){i.val(""),i.parent().find('input[type="hidden"]').val(""),t.removeClass("opened"),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),o()},intlTelInput:function(){e("body > .bookmify_be_popup_form_wrap .phone_wrap input").each(function(){var a=e(this),i=a.val();a.intlTelInput({autoPlaceholder:"aggressive",autoHideDialCode:!0}),a.val(i)})},employeeServicesOnClick:function(){var a=e(".bookmify_be_employee_edite_services li.category_item"),i=this;a.each(function(){var a=e(this),t=a.find('.category_heading input[type="checkbox"]'),o=a.find('.services_list_cat input[type="checkbox"]');o.on("change",function(){var t=e(this),o=t.closest("li");o.find(".price_capacity input").attr("disabled",!t.is(":checked")),t.is(":checked")?o.addClass("active"):o.removeClass("active"),i.checkEmployeeServicesCheckboxes(a)}),t.on("change",function(){var e=o.closest("li"),a=e.find(".price_capacity input");t.is(":checked")?(e.addClass("active"),o.prop("checked",!0),a.attr("disabled",!1)):(e.removeClass("active"),o.prop("checked",!1),a.attr("disabled",!0))}),t.closest("li").find(".cat_title").on("click",function(){var e=o.closest("li"),a=e.find(".price_capacity input");t.is(":checked")?t.prop("checked",!1):t.prop("checked",!0),t.is(":checked")?(e.addClass("active"),o.prop("checked",!0),a.attr("disabled",!1)):(e.removeClass("active"),o.prop("checked",!1),a.attr("disabled",!0))}),i.checkEmployeeServicesCheckboxes(a)})},checkEmployeeServicesCheckboxes:function(e){var a=e.find('.services_list_cat input[type="checkbox"]'),i=e.find('.services_list_cat input[type="checkbox"]:checked'),t=e.find('.category_heading input[type="checkbox"]');i.length===a.length?t.prop("checked",!0):t.prop("checked",!1)},openerEmployee:function(){var a=this;e(".bookmify_be_employees_list .bookmify_be_edit").off().on("click",function(i){i.preventDefault(),a.cache.filterServiceWrap.removeClass("opened");var t=e(this),o=t.closest(".bookmify_be_list_item"),n={action:"ajaxQueryEditEmployee",bookmify_data:o.data("entity-id"),bookmify_authcode:a.employeeAuthCode};return t.hasClass("loading")||(t.addClass("loading"),o.addClass("loading"),e.ajax({type:"POST",url:a.ajaxurl,cache:!1,data:n,success:function(e){t.removeClass("loading"),o.removeClass("loading"),a.getRequestedEmployeePopup(e)},error:function(){}})),!1})},getRequestedEmployeePopup:function(a){var i=e.parseJSON(a).bookmify_be_data;e("body").addClass("disable_scroll").append(i),e("body > .bookmify_be_popup_form_wrap").addClass("bookmify_be_popup_form_employee"),this.imgToSvg(),this.universalTab(),this.intlTelInput(),this.mediaUploadToEmployee(),this.popperLocations(),this.popperWPUsers(),this.employeeServicesOnClick(),this.workingHoursPopper(),this.checkWorkingHours(),this.applyHours(),this.breaksAdd(),this.breaksPopper(),this.breaksDelete(),this.breakTimeSelect(),this.updateDayOffOfEmployee(),this.multiDatesPickerEmployees(),this.datePickerSingle(),this.addDayOffToEmployee(),this.deleteDayOff();var t=e("body > .bookmify_be_popup_form_wrap");this.googleDisable(),this.saveEmployee(),this.cancelItem(),t.addClass("enable"),this.closersPopup()},googleDisable:function(){var a=this;e("body > .bookmify_be_popup_form_wrap").find(".bookmify_be_google_disable").off().on("click",function(){var i=e(this);if(!i.hasClass("disabled")){var t={action:"ajaxQueryDeleteGoogleData",bookmify_data:i.closest(".bookmify_be_popup_form_employee").data("entity-id")};i.hasClass("loading")||(i.addClass("loading"),e.ajax({type:"POST",url:a.ajaxurl,cache:!1,data:t,success:function(t){i.removeClass("loading"),i.closest(".bookmify_be_emmp_google_cal").html(e.parseJSON(t).html),a.googleDisable()},error:function(){}}))}return!1})},universalTab:function(){e(".bookmify_be_tab_wrap").each(function(){var a=e(this);a.children(".bookmify_be_link_tabs").find("a.bookmify_be_tab_link").on("click",function(){e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked");var i=e(this).parent(),t=i.index();return i.siblings("li").removeClass("active"),i.addClass("active"),a.children().children(".bookmify_be_tab_pane").removeClass("active"),e(a.children().children(".bookmify_be_tab_pane")[t]).addClass("active"),!1})})},closerButton:function(){var a=this;e(".bookmify_be_popup_form_wrap.enable").find("span.closer").on("click",function(){a.closePopupForm()})},closerEsc:function(){e(document).keyup(function(e){e.key})},closersPopup:function(){this.closerEsc(),this.closerButton()},closePopupForm:function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked");var a=e(".bookmify_be_popup_form_wrap.enable");e("body").removeClass("disable_scroll"),a.removeClass("enable"),setTimeout(function(){a.remove()},300)},imgToSvg:function(){e("img.bookmify_be_svg").each(function(){var a=e(this),i=a.attr("class"),t=a.attr("src");e.get(t,function(t){var o=e(t).find("svg");void 0!==i&&(o=o.attr("class",i+" replaced-svg")),o=o.removeAttr("xmlns:a"),a.replaceWith(o)},"xml")})},workingHoursPopper:function(){var a=e(".nano.employee_working_hours"),i=a.find(".nano-content > div"),t=i.length;function o(){i.on("click",function(){var i=e(this).html(),t=a.attr("data-name");e(this).hasClass("disabled")||(e('.bookmify_be_popup_form_employee input[name="'+t+'"]').val(i),a.removeClass("focused clicked"))})}e("ul.bookmify_be_working_hours_list.employee_wh input.time").off().on("click",function(n){n.stopPropagation(),n.preventDefault(),i.removeClass();var s=e(this),r=s.parent().parent().find(".start input").val(),d=s.parent().parent().find(".end input").val(),l=s.parent().attr("class");if(new Popper(s,a,{placement:"bottom-start"}),a.attr("data-name",s.attr("name")),s.hasClass("input_clicked")?(e("input").removeClass("input_clicked"),e(".nano").removeClass("focused clicked")):(e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked"),s.addClass("input_clicked"),a.addClass("focused")),"end"===l){if(""!==r)for(var c=0;c<t;c++){var p=i[c],f=e(p).html();if(e(p).addClass("disabled"),f===r)break}}else if(""!==d){i.addClass("disabled");for(var _=0;_<t;_++){var m=i[_];if(e(m).html()===d)break;e(m).removeClass("disabled")}}var u=-((a.height()-20)/2-11);if(s.val())for(var b=0;b<t;b++){var v=i[b];if(e(v).html()===s.val()){e(v).addClass("selected");break}e(v).hasClass("disabled")||(u+=27)}else u=0;e(".scrollbar-inner").scrollTop(u),a.addClass("focused"),o()}),o(),e(window).on("click",function(){}),a.on("click",function(e){e.stopPropagation(),e.preventDefault()})},breaksAdd:function(){var a=e("ul.bookmify_be_working_hours_list.employee_wh .breaks_add a"),i=this;a.on("click",function(){var a=e(this),t=a.parent().siblings(".breaks_list"),o=t.find(".item").length,n=a.parents(".hour_item").parent(),s=n.attr("class")+"_break_start",r=n.attr("class")+"_break_end",d=n.attr("class")+"_start_"+o,l=n.attr("class")+"_end_"+o;return t.append('<div class="item"><div class="break_start"><input readonly class="break_time '+d+'" type="text" name="'+s+'" value="" /></div><div class="break_end"><input readonly class="break_time '+l+'" type="text" name="'+r+'" value="" /></div><div class="break_del"><span></span></div></div>'),i.breaksDelete(),i.applyHours(),i.breaksPopper(),!1})},breaksDelete:function(){e("ul.bookmify_be_working_hours_list.employee_wh .break_del span").off().on("click",function(){for(var a=e(this),i=a.closest(".breaks_list").find(".item"),t=a.closest(".hour_item").parent().attr("class"),o=a.closest(".breaks_list").find(".item").length,n=a.parent().parent(),s=n.index(),r=0,d=0;d<o;d++)d===s?r--:(e(i[d]).find(".break_start input").removeClass().addClass("break_time "+t+"_start_"+r),e(i[d]).find(".break_end input").removeClass().addClass("break_time "+t+"_end_"+r)),r++;n.remove()})},applyHours:function(){var a=this,i=e("ul.bookmify_be_working_hours_list.employee_wh .apply span");i.length&&(i.on("click",function(){var i=e(this),t=i.parents(".hour_item").parent(),o=i.closest("ul.bookmify_be_working_hours_list").children("li"),n=t.attr("class"),s=t.find(".start input").val(),r=t.find(".end input").val(),d=t.find(".breaks_list").html();o.each(function(){var a=e(this);if(!a.hasClass(n)){var i=a.attr("class"),t=d.bookmifyBeReplaceAll_Settings(n,i);a.find(".start").attr("data-value",s).find("input").val(s),a.find(".end").attr("data-value",r).find("input").val(r),a.find(".breaks_list").html(t),a.find(".breaks_list .item").each(function(){var a=e(this).find(".break_start").attr("data-value"),i=e(this).find(".break_end").attr("data-value");e(this).find(".break_start input").val(a),e(this).find(".break_end input").val(i)})}}),a.breaksPopper(),a.breaksDelete()}),e.protip())},breaksPopper:function(){var a=this,i=e("ul.bookmify_be_working_hours_list.employee_wh .breaks .break_time"),t=e(".nano.employee_break");i.off().on("click",function(i){a.applyHours(),a.breakTimeSelect(),i.stopPropagation();var o=e(this),n=o.closest(".hour_item").parent().find(".start input").val(),s=o.closest(".hour_item").parent().find(".end input").val(),r=o.parent().parent().find(".break_start input").val(),d=o.parent().parent().find(".break_end input").val();r=o.parent().parent().find(".break_start input").val(),d=o.parent().parent().find(".break_end input").val();var l=o.parent().attr("class"),c=o.attr("class").replace("break_time ",""),p=(new Popper(o,t,{placement:"bottom-start"}),o.closest(".bookmify_be_employees_item").data("entity-id"));o.hasClass("input_clicked")?(e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked")):(e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked"),o.addClass("input_clicked"),t.addClass("focused"),t.removeClass("loaded").addClass("clicked "+l).attr("data-name",c).attr("data-id",p));var f=t.find(".nano-content > div");f.removeClass();for(var _=f.length,m=0,u=0,b=0,v=0;v<_;v++){var y=f[v],h=e(y).html(),k=0;h===n&&(m++,b=v),h===s&&(m++,k++,u=v),1===m?e(y).removeClass("disabled"):e(y).addClass("disabled"),1===k&&e(y).removeClass("disabled")}if("break_start"===l){if(e(f[b]).removeClass("disabled"),e(f[u]).addClass("disabled"),""!==d){var C=0;for(v=0;v<_;v++){var g=f[v];e(g).html()===d&&C++,1===C&&e(g).addClass("disabled")}}}else if(e(f[u]).removeClass("disabled"),e(f[b]).addClass("disabled"),""!==r){var w=0;for(v=0;v<_;v++){var T=f[v],x=e(T).html();0===w&&e(T).addClass("disabled"),x===r&&w++}}var D=-((t.height()-20)/2-11);if(o.val())for(var I=0;I<_;I++){var S=f[I];if(e(S).html()===o.val()){e(S).addClass("selected");break}e(S).hasClass("disabled")||(D+=27)}else D=0;e(".scrollbar-inner").scrollTop(D),a.breakTimeSelect()}),e(window).on("click",function(){t.addClass("loaded").removeClass("clicked break_start break_end")})},breakTimeSelect:function(){e(".nano.employee_break").find(".nano-content > div").on("click",function(){var a=e(this);if(!a.hasClass("disabled")){var i=a.html(),t=a.parents(".nano").attr("data-name");e(".bookmify_be_popup_form_employee input."+t).val(i).parent().attr("data-value",i)}})},addDayOffToEmployee:function(){var i=this;e(".bookmify_be_employeestabs_wrap .bookmify_day_off_add_section .do_dd_footer a.add").off().on("click",function(t){t.preventDefault();var o=e(this),n=o.closest(".bookmify_day_off_add_section"),s=n.siblings(".do_list").find(".bookmify_private_dayoff_list"),r=n.find("form").serialize(),d=n.find('input[name="offday_name"]').val(),l=n.find('input[name="offday_days"]').data("id"),c=n.find('input[name="offday_hidden_day"]').val(),p=c.split(", ").length,f=e(".bookmify_private_dayoff_list ul"),_=0;if(""===d||""===c)""===c?e.iaoAlert({msg:i.alertWarningIcon+i.noDateEnteredText,type:"success",alertTime:i.iaoAlertTime,position:i.iaoAlertPosition}):e.iaoAlert({msg:i.alertWarningIcon+i.noTitleEnteredText,type:"success",alertTime:i.iaoAlertTime,position:i.iaoAlertPosition});else{if(f.hasClass("opened")&&(f.children("li.opened").find(".required_field").each(function(){var a=e(this);""===a.val()&&(a.parent().find(".error_note").remove(),a.parent().addClass("required_error").append(i.errorField),_++)}),0===_&&(f.removeClass("opened").children("li").removeClass("opened").find(".bookmify_day_off_edit_dd").slideUp(300),300)),0!==_)return i.scrollToTop(300),!1;o.addClass("await");var m={action:"ajaxQueryAddOffDayTimely",bookmify_data:r};e.ajax({type:"POST",url:i.ajaxurl,cache:!0,data:m,success:function(t){i.offdayInsertAjaxProcess(t,s,p,o),i.multiDatesPickerEmployees(),e('input[name="offday_days"][data-id="'+l+'"]').multiDatesPicker("removeDates",a.days),a.days=[],e('.bookmify_be_popup_form_employee .bookmify_day_off_add_section input[name="offday_name"]').val(""),e('.bookmify_be_popup_form_employee .bookmify_day_off_add_section input[name="offday_hidden_day"]').val(""),e(".bookmify_be_popup_form_employee .bookmify_day_off_add_section input[type=checkbox]").removeAttr("checked"),i.imgToSvg(),i.updateDayOffOfEmployee(),i.deleteDayOff(),i.datePickerSingle()},error:function(){}})}return!1})},offdayInsertAjaxProcess:function(a,i,t,o){var n=e.parseJSON(a);i.find("ul.dayoff_list li").length?i.find("ul.dayoff_list li:first").before(n.html):i.find("ul.dayoff_list").append(n.html);for(var s=0;s<t;s++)e(i.find("ul.dayoff_list li")[s]).addClass("added");setTimeout(function(){i.find("ul.dayoff_list li").removeClass("added")},7e3),o.removeClass("await")},datePickerSingle:function(){var a=this;e(".mdp-do-hidden").each(function(){var i=e(this);if(i.length){var t=i.siblings("input.offday_hidden_day"),o=i.data("selected-day"),n=i.closest(".bookmify_be_list_item").find(".header_in .list_date");i.datepicker({dateFormat:"yy-mm-dd",altField:t,altFormat:"yy-mm-dd",onSelect:function(){i.datepicker("hide"),n.html("").html(a.wpDateToOptionDate(t.val()))}}),i.datepicker("setDate",o)}})},updateDayOffOfEmployee:function(){var a=e(".bookmify_be_popup_form_employee ul.dayoff_list a.bookmify_be_edit"),i=this;a.off().on("click",function(a){a.preventDefault();var t=e(this).closest(".bookmify_be_list_item"),o=t.find(".bookmify_day_off_edit_dd"),n=t.siblings(),s=n.find(".bookmify_day_off_edit_dd"),r=t.parent(),d=0;return i.simultaneouslyTyping(),r.hasClass("opened")&&r.children("li.opened").find(".required_field").each(function(){var a=e(this);""===a.val()&&(a.parent().find(".error_note").remove(),a.parent().addClass("required_error").append(i.errorField),d++)}),0===d&&(t.hasClass("opened")?(o.slideUp(),t.removeClass("opened").parent().removeClass("opened").parent().removeClass("opened")):(s.slideUp(),o.slideDown(),n.removeClass("opened"),t.addClass("opened").parent().addClass("opened").parent().addClass("opened")),!1)})},multiDatesPickerEmployees:function(){e('.bookmify_day_off_add_section input[name="offday_days"]').each(function(){var i=e(this),t=i.data("id"),o=[];i.multiDatesPicker({dateFormat:"yy-mm-dd",altField:"#offday_hidden_day_"+t,onSelect:function(e){o.push(e),a.days.push(e)}});var n=i.closest(".bookmify_day_off_add_section");n.find(".do_dd_footer a.cancel").on("click",function(){return e('input[name="offday_days"][data-id="'+t+'"]').multiDatesPicker("removeDates",a.days),a.days=[],n.find("input[type=text]").val(""),n.find("input[type=hidden]").val(""),n.find("input[type=checkbox]").removeAttr("checked"),!1})})},saveEmployee:function(){var a=e(".bookmify_be_popup_form_employee .bookmify_be_popup_form_button a.save"),i=this;a.off().on("click",function(){var a=e(this),o=a.closest(".bookmify_be_popup_form_employee"),n="insert",s=0,r=0,d=0,l=o.find(".bookmify_be_employeestabs_wrap > .bookmify_be_link_tabs"),c=o.find(".bookmify_be_employeestabs_wrap > .bookmify_be_content_tabs"),p=o.find(".required_field"),f=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(p.each(function(){var a=e(this);a.hasClass("employee_email")?""===a.val()?a.parent().hasClass("required_error")||(a.parent().find(".error_note").remove(),a.parent().addClass("required_error").append(i.errorField),s++,r++):f.test(a.val())||(a.parent().find(".error_note").remove(),a.parent().addClass("invalid_email").append(i.invalidEmail),s++,r++):""===a.val()&&(a.parent().find(".error_note").remove(),a.parent().addClass("required_error").append(i.errorField),s++,a.parent().hasClass("do_item")?d++:r++)}),0!==s){if(0!==r)0!==l.find("li.active").index()&&(l.find("li.active").removeClass("active"),c.children(".bookmify_be_tab_pane.active").removeClass("active"),l.find("li:first").addClass("active"),c.children(".bookmify_be_tab_pane:first").addClass("active"));else if(0!==d){3!==l.find("li.active").index()&&(l.find("li.active").removeClass("active"),c.children(".bookmify_be_tab_pane.active").removeClass("active"),l.find("li:nth-child(4)").addClass("active"),c.children(".bookmify_be_tab_pane:nth-child(4)").addClass("active"));var _=c.children(".bookmify_be_tab_pane:nth-child(4)").find(".bookmify_be_link_tabs"),m=c.children(".bookmify_be_tab_pane:nth-child(4)").find(".bookmify_be_content_tabs");0!==_.find("li.active").index()&&(_.find("li.active").removeClass("active"),m.children(".bookmify_be_tab_pane.active").removeClass("active"),_.find("li:first").addClass("active"),m.children(".bookmify_be_tab_pane:first").addClass("active"))}return i.scrollToTop(500),!1}a.addClass("await");var u=o.find(".bookmify_be_employee_edit_detail"),b={};b.id=o.data("entity-id"),b.att_id=u.find("input[name='employee_img_id']").val(),b.first_name=u.find("input[name='first_name']").val(),b.last_name=u.find("input[name='last_name']").val(),b.email=u.find("input[name='email']").val(),b.location_id=u.find("input[name='location_id']").val(),b.phone=u.find("input[name='phone']").val(),b.wp_user_id=u.find("input[name='wp_user_id']").val(),b.checked=!0===u.find("input[name='employee_visibility']").prop("checked")?"public":"private",b.desc=u.find("textarea").val();var v=o.data("entity-id"),y=o.find("ul.services_list_cat"),h=[],k={allextra:[]};y.find("li.active").each(function(){var a={},i=e(this);a.id=i.find("input[type='checkbox']").val(),a.price=i.find(".bookmify_be_employees_service_price").val(),a.max_cap=i.find(".bookmify_be_employees_service_cmax").val(),a.min_cap=i.find(".bookmify_be_employees_service_cmin").val(),a.deposit=i.find(".bookmify_be_employees_service_deposit").val(),k.allextra.push(a)}),k.employeeID=[],k.employeeID.push(v),h.push(k);var C=o.find("form.bookmify_working_hours"),g=[],w=!0===C.find('input[name="monday_checked"]').prop("checked")?1:0,T=C.find('input[name="bookmify_be_monday_start"]').val(),x=C.find('input[name="bookmify_be_monday_end"]').val();T=e('.nano-content [data-id2="'+T+'"]').data("id"),x=e('.nano-content [data-id2="'+x+'"]').data("id");var D=!0===C.find('input[name="tuesday_checked"]').prop("checked")?1:0,I=C.find('input[name="bookmify_be_tuesday_start"]').val(),S=C.find('input[name="bookmify_be_tuesday_end"]').val();I=e('.nano-content [data-id2="'+I+'"]').data("id"),S=e('.nano-content [data-id2="'+S+'"]').data("id");var P=!0===C.find('input[name="wednesday_checked"]').prop("checked")?1:0,E=C.find('input[name="bookmify_be_wednesday_start"]').val(),A=C.find('input[name="bookmify_be_wednesday_end"]').val();E=e('.nano-content [data-id2="'+E+'"]').data("id"),A=e('.nano-content [data-id2="'+A+'"]').data("id");var O=!0===C.find('input[name="thursday_checked"]').prop("checked")?1:0,j=C.find('input[name="bookmify_be_thursday_start"]').val(),L=C.find('input[name="bookmify_be_thursday_end"]').val();j=e('.nano-content [data-id2="'+j+'"]').data("id"),L=e('.nano-content [data-id2="'+L+'"]').data("id");var N=!0===C.find('input[name="friday_checked"]').prop("checked")?1:0,W=C.find('input[name="bookmify_be_friday_start"]').val(),F=C.find('input[name="bookmify_be_friday_end"]').val();W=e('.nano-content [data-id2="'+W+'"]').data("id"),F=e('.nano-content [data-id2="'+F+'"]').data("id");var U=!0===C.find('input[name="saturday_checked"]').prop("checked")?1:0,q=C.find('input[name="bookmify_be_saturday_start"]').val(),H=C.find('input[name="bookmify_be_saturday_end"]').val();q=e('.nano-content [data-id2="'+q+'"]').data("id"),H=e('.nano-content [data-id2="'+H+'"]').data("id");var J=!0===C.find('input[name="sunday_checked"]').prop("checked")?1:0,z=C.find('input[name="bookmify_be_sunday_start"]').val(),Q=C.find('input[name="bookmify_be_sunday_end"]').val();z=e('.nano-content [data-id2="'+z+'"]').data("id"),Q=e('.nano-content [data-id2="'+Q+'"]').data("id"),g.push([w,T,x]),g.push([D,I,S]),g.push([P,E,A]),g.push([O,j,L]),g.push([N,W,F]),g.push([U,q,H]),g.push([J,z,Q]);var B=[],R=[],Y=[],V=[],Z=[],G=[],$=[];C.find("li.monday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(a=e('.nano-content [data-id2="'+a+'"]').data("id"),i=e('.nano-content [data-id2="'+i+'"]').data("id"),B.push(a),B.push(i))}),C.find("li.tuesday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(a=e('.nano-content [data-id2="'+a+'"]').data("id"),i=e('.nano-content [data-id2="'+i+'"]').data("id"),R.push(a),R.push(i))}),C.find("li.wednesday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(a=e('.nano-content [data-id2="'+a+'"]').data("id"),i=e('.nano-content [data-id2="'+i+'"]').data("id"),Y.push(a),Y.push(i))}),C.find("li.thursday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(a=e('.nano-content [data-id2="'+a+'"]').data("id"),i=e('.nano-content [data-id2="'+i+'"]').data("id"),V.push(a),V.push(i))}),C.find("li.friday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(a=e('.nano-content [data-id2="'+a+'"]').data("id"),i=e('.nano-content [data-id2="'+i+'"]').data("id"),Z.push(a),Z.push(i))}),C.find("li.saturday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(a=e('.nano-content [data-id2="'+a+'"]').data("id"),i=e('.nano-content [data-id2="'+i+'"]').data("id"),G.push(a),G.push(i))}),C.find("li.sunday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(a=e('.nano-content [data-id2="'+a+'"]').data("id"),i=e('.nano-content [data-id2="'+i+'"]').data("id"),$.push(a),$.push(i))});var K=o.find(".bookmify_private_dayoff_list"),M=[],X={alldayOffs:[]};K.find(".bookmify_be_list_item").each(function(){var a={},i=e(this);a.id=i.data("entity-id"),a.dateOff=i.find('input[name="offday_hidden_day"]').val(),a.title=i.find('input[name="offday_name"]').val(),a.checked=!0===i.find("input[name='offday_repeat']").prop("checked")?1:0,X.alldayOffs.push(a)}),M.push(X),b.id&&(n="update");var ee=[B,R,Y,V,Z,G,$],ae={action:"ajaxQueryInsertOrUpdateEmployee",bookmify_data:JSON.stringify(b),bookmify_service_data:JSON.stringify(h),bookmify_wh_data:g,employeeID:v,bookmify_do_data:JSON.stringify(M),insertOrUpdate:n,allBreaks:ee,do:1,bookmify_page:t.page,bookmify_search:t.search,bookmify_order:t.order,bookmify_services:t.IDs};return e.ajax({type:"POST",url:i.ajaxurl,cache:!1,data:ae,success:function(e){a.removeClass("await"),i.getUpdatedEmployeesList(e,n)},error:function(){}}),!1}),e(".bookmify_be_popup_form_employee input.required_field").keyup(function(){var a=e(this);(""!==a.val()&&a.parent().hasClass("required_error")||a.parent().hasClass("invalid_email"))&&(a.parent().removeClass("required_error invalid_email"),a.parent().find(".error_note").remove())})},getUpdatedEmployeesList:function(a,i){var t=this,o=e.parseJSON(a),n=e(".bookmify_be_employee_list_content"),s=e(".bookmify_be_page_title h3 span.count");t.closePopupForm(),"update"===i?setTimeout(function(){e.iaoAlert({msg:t.alertSuccessIcon+t.updatedText,type:"success",alertTime:t.iaoAlertTime,position:t.iaoAlertPosition})},301):setTimeout(function(){e.iaoAlert({msg:t.alertSuccessIcon+t.addedText,type:"success",alertTime:t.iaoAlertTime,position:t.iaoAlertPosition})},301),"cant"===o.demo_check&&setTimeout(function(){e.iaoAlert({msg:t.alertSuccessIcon+t.demoWpUserID,type:"success",alertTime:t.iaoAlertTime,position:t.iaoAlertPosition})},1e3),n.html(o.bookmify_be_data),s.html(o.number);var r=n.find(".employees_list > li");setTimeout(function(){r.each(function(a,i){setTimeout(function(){e(i).addClass("fadeInTop done")},100*a)})},150),t.init()},mediaUploadToEmployee:function(){e("body > .bookmify_be_popup_form_wrap .bookmify_thumb_edit").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked");var i=e(this).closest(".bookmify_be_popup_form_wrap"),t=i.find('input[class="bookmify_be_img_id"]'),o=i.find(".bookmify_thumb_wrap"),n=i.find(".bookmify_thumb_remove"),s="",r=wp.media({library:{type:"image"},multiple:!1});return r.on("select",function(){var a=r.state().get("selection").toJSON();a.length&&(void 0!==a[0].sizes.thumbnail?a[0].sizes.thumbnail.url:a[0].url,s=void 0!==a[0].sizes.large?a[0].sizes.large.url:a[0].url,t.val(a[0].id),o.addClass("has_image").css({"background-image":"url("+s+")"}),e(this).hide(),n.show())}),r.open(),!1}),e("body > .bookmify_be_popup_form_wrap .bookmify_thumb_remove a").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked");var i=e(this).closest(".bookmify_be_popup_form_wrap"),t=i.find('input[class="bookmify_be_img_id"]'),o=i.find(".bookmify_thumb_wrap");return t.val(""),o.removeClass("has_image").css({"background-image":"none"}),e(this).parent().hide(),!1})},deleteEmployee:function(){var a=e(".bookmify_be_employees_list .bookmify_be_delete"),i=this;a.off().on("click",function(){e(".bookmify_be_filter_list").removeClass("opened");var a=e(this),t=a.data("entity-id"),o=a.parents(".bookmify_be_list_item");return a.addClass("clicked"),i.confirmDeleteEmployee(o,t,a),!1})},confirmDeleteEmployee:function(a,i,t){var o=e("#bookmify_be_confirm"),n=o.find("a.yes"),s=o.find("a.no"),r=this;o.addClass("opened"),n.off().on("click",function(n){return n.preventDefault(),t.removeClass("clicked"),t.addClass("await"),t.addClass("loading"),a.addClass("loading"),e.ajax({type:"POST",url:r.ajaxurl,cache:!1,data:{action:"ajaxQueryDeleteEmployee",bookmify_employee_id:i},success:function(i){var o=e.parseJSON(i);e(".bookmify_be_page_title h3 span.count").html(o.number),0===parseInt(o.count)?(t.removeClass("await"),a.removeClass("opened").slideUp(300),a.parent().removeClass("opened"),setTimeout(function(){a.remove()},301),e.iaoAlert({msg:r.alertSuccessIcon+r.deletedText,type:"success",alertTime:r.iaoAlertTime,position:r.iaoAlertPosition})):(t.removeClass("await loading"),a.removeClass("opened loading"),a.parent().removeClass("opened"),e.iaoAlert({msg:r.alertWarningIcon+'<span class="error_note">'+r.cantDeleteEmployee+" "+o.count+"</span>",type:"success",alertTime:r.iaoAlertTime,position:r.iaoAlertPosition}))},error:function(){}}),o.removeClass("opened"),!1}),s.on("click",function(){return o.removeClass("opened"),t.removeClass("clicked"),!1}),e(document).keydown(function(e){if(27===e.keyCode)return o.removeClass("opened"),t.removeClass("clicked"),!1})},doFilter:function(){var a=e(".bookmify_be_pagination.employee_list li a"),i=this,o=e(".bookmify_be_filter_search");a.off().on("click",function(a){a.preventDefault(),e(".bookmify_be_filter_list").removeClass("opened");var o=e(this),n=o.parent(),s=o.data("page"),r=0;return n.hasClass("prev")?(s=o.parent().parent().find("li.active a").data("page")-1,r=1):n.hasClass("next")&&(s=o.parent().parent().find("li.active a").data("page")+1,r=1),n.hasClass("active")||(t.page=s,i.filterAjaxCall()),1===r&&(t.page=s,i.filterAjaxCall()),!1}),e(".bookmify_be_employees .bookmify_be_filter .filter_order").off().on("click",function(a){a.preventDefault(),e(".bookmify_be_filter_list").removeClass("opened");var o="ASC",n=e(this).closest(".bookmify_be_filter_order");return!n.hasClass("await")&&(n.addClass("await"),n.hasClass("active")?(n.removeClass("active"),o="ASC"):(n.addClass("active"),o="DESC"),t.order=o,t.orderClass="order_"+o.toLowerCase(),t.page=1,i.filterAjaxCall(),!1)});var n=null;e(".bookmify_be_employees .bookmify_be_filter .filter_search").off().on("keyup",function(){var a=e(this).val();t.page=1,clearTimeout(n),n=setTimeout(function(){if(t.search=a,a===t.text)return!1;t.text=a,o.removeClass("ready").addClass("await"),i.filterAjaxCall()},700)}),o.find(".icon").off().on("click",function(){e(".bookmify_be_filter_list").removeClass("opened"),o.removeClass("ready").addClass("await"),o.find("input").val(""),t.text="",t.search="",t.page=1,i.filterAjaxCall()}),e(window).on("click",function(){i.cache.filterServiceWrap.removeClass("opened")}),i.cache.filterServiceWrap.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceWrap.addClass("opened")});var s=null;i.cache.filterServiceList.children("div").off().on("click",function(){var a=e(this),o=a.data("id");return a.hasClass("sending")?(a.removeClass("sending"),t.IDs=e.grep(t.IDs,function(e){return e!==o})):(a.addClass("sending"),t.IDs.push(o)),clearTimeout(s),i.checkNewValueForServiceFilterInEmployee(),s=setTimeout(function(){i.filterAjaxCall(),i.cache.filterServiceWrap.removeClass("opened")},700),!1}),i.cache.filterServiceWrap.find(".icon").off().on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceInput.attr("placeholder",i.cache.filterServiceInputPlaceholder),i.cache.filterServiceInput.siblings(".bookmify_be_new_value").html(""),i.cache.filterServiceWrap.removeClass("ready"),i.cache.filterServiceList.children("div").removeClass("sending"),t.IDs=[],i.cache.filterServiceWrap.removeClass("opened"),i.filterAjaxCall()})},checkNewValueForServiceFilterInEmployee:function(){if(e.isEmptyObject(t.IDs))this.cache.filterServiceInput.attr("placeholder",this.cache.filterServiceInputPlaceholder),this.cache.filterServiceInput.siblings(".bookmify_be_new_value").html(""),this.cache.filterServiceWrap.removeClass("ready");else{var a="";if(this.cache.filterServiceInput.attr("placeholder",""),t.IDs.length>1){var i=this.cache.filterServiceList.children("div").length;a='<span class="number">'+t.IDs.length+" / "+i+"</span>"}var o='<span class="text">'+this.cache.filterServiceList.find('div[data-id="'+t.IDs[0]+'"]').html()+"</span>";this.cache.filterServiceInput.siblings(".bookmify_be_new_value").html("").html(o+a),this.cache.filterServiceWrap.addClass("ready")}},filterAjaxCall:function(){var a=this,i=e(".bookmify_be_filter_search"),o=e(".bookmify_be_filter_order"),n={action:"ajaxFilterEmployeeList",bookmify_page:t.page,bookmify_search:t.search,bookmify_order:t.order,bookmify_services:t.IDs};e.ajax({type:"POST",url:a.ajaxurl,cache:!0,data:n,success:function(e){i.removeClass("await ready"),""!==t.search&&i.addClass("ready"),o.removeClass("await order_desc order_asc").addClass(t.orderClass),a.getFilteredEmlpoyeesList(e)},error:function(){}})},getFilteredEmlpoyeesList:function(a){var i=e.parseJSON(a),t=e(".bookmify_be_employee_list_content");t.html(i.bookmify_be_data);var o=t.find(".employees_list > li");setTimeout(function(){o.each(function(a,i){setTimeout(function(){e(i).addClass("fadeInTop done")},100*a)})},150),this.init()},checkWorkingHours:function(){var a=this,i=e("ul.bookmify_be_working_hours_list.employee_wh > li");i.length&&i.each(function(){var i=e(this),t=i.find(".day input[type=checkbox]");a.checkAgainWorkingHours(t,i),i.find(".item_wh .day").on("click",function(){t.is(":checked")?t.prop("checked",!1):t.prop("checked",!0),t=i.find(".day input[type=checkbox]"),a.checkAgainWorkingHours(t,i)})})},checkAgainWorkingHours:function(e,a){e.is(":checked")?(a.attr("data-checked","checked"),a.find("input.time").removeAttr("disabled")):(a.attr("data-checked",""),a.find("input.time").attr("disabled",""))},simultaneouslyTyping:function(){e('.do_list_content .dayoff_list input[name="offday_name"]').keyup(function(){var a=e(this),i=a.val();a.closest(".bookmify_be_list_item").find("span.list_title").text(i),""!==i&&a.parent().hasClass("required_error")&&(a.parent().removeClass("required_error invalid_email"),a.parent().find(".error_note").remove())}),e('.do_list_content .dayoff_list input[name="offday_repeat"]').on("change",function(){var a=e(this).closest(".bookmify_be_list_item").find(".header_in");this.checked?a.attr("data-yearly","yes"):a.attr("data-yearly","no")})},wpDateToOptionDate:function(e){var a=e.split("-"),i="",t="";switch(parseInt(a[1])){case 1:t=o.janNameInLocal;break;case 2:t=o.febNameInLocal;break;case 3:t=o.marNameInLocal;break;case 4:t=o.aprNameInLocal;break;case 5:t=o.mayNameInLocal;break;case 6:t=o.junNameInLocal;break;case 7:t=o.julNameInLocal;break;case 8:t=o.augNameInLocal;break;case 9:t=o.sepNameInLocal;break;case 10:t=o.octNameInLocal;break;case 11:t=o.novNameInLocal;break;case 12:t=o.decNameInLocal}switch(o.defaultOption){case"F d, Y":i=t+" "+a[2]+", "+a[0];break;case"d F, Y":i=a[2]+" "+t+", "+a[0];break;case"Y-m-d":i=a[0]+"-"+a[1]+"-"+a[2];break;case"m/d/y":i=a[1]+"/"+a[2]+"/"+a[0];break;case"d/m/y":i=a[2]+"/"+a[1]+"/"+a[0]}return i},deleteDayOff:function(){var a=this;e(".bookmify_private_dayoff_list .bookmify_be_delete").off().on("click",function(){var i=e(this),t=i.closest(".bookmify_be_list_item"),o=t.data("entity-id");return e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),""===o||void 0===o?t.hasClass("opened")?(t.slideUp(500),setTimeout(function(){t.parent().removeClass("opened"),t.remove()},501)):(t.slideUp(300),setTimeout(function(){t.remove()},301)):(i.addClass("clicked"),a.deleteConfirmDayOff(t,o,i)),!1})},deleteConfirmDayOff:function(a,i,t){var o=this,n=e("#bookmify_be_confirm");n.addClass("opened dayoff_confirm");var s=e("#bookmify_be_confirm.dayoff_confirm").find("a.yes"),r=e("#bookmify_be_confirm.dayoff_confirm").find("a.no");s.off().on("click",function(s){t.removeClass("clicked"),t.addClass("loading"),a.addClass("loading"),s.preventDefault(),n.removeClass("opened dayoff_confirm");var r={action:"ajaxQueryDeleteDayOff",bookmify_day_off_id:i};e.ajax({type:"POST",url:o.ajaxurl,cache:!0,data:r,success:function(){return a.slideUp(500),setTimeout(function(){a.remove()},600),a.parent().removeClass("opened"),o.updateDayOffOfEmployee(),setTimeout(function(){e.iaoAlert({msg:o.alertSuccessIcon+o.deletedText,type:"success",alertTime:o.iaoAlertTime,position:o.iaoAlertPosition})},800),!1}})}),r.on("click",function(){return t.removeClass("clicked"),n.removeClass(),!1})},scrollToTop:function(a){e(".bookmify_be_popup_form_wrap").animate({scrollTop:0},a)},cancelItem:function(){var a=this;e(".bookmify_be_popup_form_button a.cancel").off().on("click",function(){return a.closePopupForm(),!1})},insertEmployee:function(){var a=this;e(".bookmify_be_add_new_employee a").off().on("click",function(){e(".bookmify_be_filter_list").removeClass("opened");var t=i.cloneForm.clone();return e("body").addClass("disable_scroll").append(t),e("body > .bookmify_be_popup_form_wrap").addClass("bookmify_be_popup_form_employee"),a.imgToSvg(),a.universalTab(),a.intlTelInput(),a.mediaUploadToEmployee(),a.popperLocations(),a.popperWPUsers(),a.employeeServicesOnClick(),a.workingHoursPopper(),a.checkWorkingHours(),a.applyHours(),a.breaksAdd(),a.breaksPopper(),a.breaksDelete(),a.breakTimeSelect(),a.updateDayOffOfEmployee(),a.multiDatesPickerEmployees(),a.datePickerSingle(),a.addDayOffToEmployee(),a.deleteDayOff(),a.googleDisable(),a.saveEmployee(),a.cancelItem(),e("body > .bookmify_be_popup_form_wrap").addClass("enable"),a.closersPopup(),!1})}};e(document).ready(function(){s.init()}),e(window).load(function(){s.workingHoursPopper()})}(jQuery);