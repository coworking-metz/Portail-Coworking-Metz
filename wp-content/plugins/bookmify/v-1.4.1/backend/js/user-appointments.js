!function(e){"use strict";var t=bookmifyConfig;moment.updateLocale("en",{months:t.calendar.monthsLong,monthsShort:t.calendar.monthsShort,weekdays:t.calendar.daysLong,weekdaysShort:t.calendar.daysShort,weekdaysMin:t.calendar.daysShort});var a={page:1,search:"",order:"ASC",text:"",orderClass:"order_asc",servicesIDs:[],customerID:"",employeeID:"",status:"",dateRange:[t.appointmentStartDate,t.appointmentEndDate],startDate:moment(),endDate:moment().add(t.appointmentDateRange,"days"),oldStartDate:moment().format("YYYY-MM-DD")+" 00:00:00",oldEndDate:moment().add(t.appointmentDateRange,"days").format("YYYY-MM-DD")+" 23:59:59",oldSDate:moment(),oldEDate:moment().add(t.appointmentDateRange,"days"),filterCount:0},i={div1:"",div2:"",div3:""},n={serviceDuration:0,serviceCapMin:"",serviceCapMax:"",extraDuration:0},o={iaoAlertTime:"5000",iaoAlertPosition:"bottom-right",alertSuccessIcon:'<span class="icon_holder success"><i class="xcon-ok"></i></span>',alertWarningIcon:'<span class="icon_holder warning"><i class="xcon-attention-alt"></i></span>',deletedText:'<span class="text">'+t.deletedText+"</span>",savedText:'<span class="text">'+t.savedText+"</span>",addedText:'<span class="text">'+t.addedText+"</span>",canceledText:'<span class="text">'+t.canceledText+"</span>",errorField:'<span class="error_note">'+t.errorField+"</span>",errorDelete:'<span class="error_note">'+t.errorDelete+"</span>",errorCancel:'<span class="error_note">'+t.errorCancel+"</span>",errorEdit:'<span class="error_note">'+t.errorEdit+"</span>",hackText:'<span class="error_note">'+t.hackText+"</span>",clearCapacity:"<label>"+t.clearCapacity+"</label>",filterStatus:[],filterAppointment:[],ajaxurl:t.ajaxUrl,noRecords:t.noRecords,minCapacity:t.minCapacity,maxCapacity:t.maxCapacity,momentDateFormat:t.momentDateFormat,longMonths:t.calendar.monthsLong,calendar:{monthsLong:t.calendar.monthsLong,monthsShort:t.calendar.monthsShort,daysLong:t.calendar.daysLong,daysShort:t.calendar.daysShort,firstDay:t.calendar.firstDay},cacheElements:function(){this.cache={allInputs:e('input[type="text"]'),allNano:e(".nano"),approvedIcon:e(".bookmify_be_hidden_info .approved_icon").html(),pendingIcon:e(".bookmify_be_hidden_info .pending_icon").html(),canceledIcon:e(".bookmify_be_hidden_info .canceled_icon").html(),rejectedIcon:e(".bookmify_be_hidden_info .rejected_icon").html(),personIcon:e(".bookmify_be_hidden_info .person_icon").html(),downIcon:e(".bookmify_be_hidden_info .down_icon").html(),info_remover:e(".bookmify_be_hidden_info .info_remover").html(),nothingFound:e(".bookmify_be_hidden_info .nothing_found").html(),canceledText:e(".bookmify_be_hidden_info .canceled_text").html(),CES:'<div class="bookmify_be_infobox danger"><label>'+e(".bookmify_be_hidden_info .select_cus_emp_ser").html()+"</label></div>",noExtras:e(".bookmify_be_hidden_info .no_extras").html(),filters:e(".bookmify_be_user_appointments .bookmify_be_appointments_filter"),filterServiceList:e(".bookmify_be_user_appointments .bookmify_be_services_filter_list"),filterServiceWrap:e(".bookmify_be_user_appointments .bookmify_be_filter_list.services"),filterCustomerList:e(".bookmify_be_user_appointments .bookmify_be_filter_popup_list.customers"),filterCustomerWrap:e(".bookmify_be_user_appointments .bookmify_be_filter_list.customers"),filterEmployeeList:e(".bookmify_be_user_appointments .bookmify_be_filter_popup_list.employees"),filterEmployeeWrap:e(".bookmify_be_user_appointments .bookmify_be_filter_list.employees"),filterStatusList:e(".bookmify_be_user_appointments .bookmify_be_filter_popup_list.status"),filterStatusWrap:e(".bookmify_be_user_appointments .bookmify_be_filter_list.status")},this.filters={customerIDs:"",categoryID:"",serviceID:"",employeeID:"",locationID:""},this.cache.filterServiceInput=this.cache.filterServiceWrap.find(".filter_list"),this.cache.filterServiceInputPlaceholder=this.cache.filterServiceInput.attr("data-placeholder"),this.cache.filterCustomerInput=this.cache.filterCustomerWrap.find(".filter_list"),this.cache.filterCustomerInputPlaceholder=this.cache.filterCustomerInput.attr("data-placeholder"),this.cache.filterEmployeeInput=this.cache.filterEmployeeWrap.find(".filter_list"),this.cache.filterEmployeeInputPlaceholder=this.cache.filterEmployeeInput.attr("data-placeholder"),this.cache.filterStatusInput=this.cache.filterStatusWrap.find(".filter_list"),this.cache.filterStatusInputPlaceholder=this.cache.filterStatusInput.attr("data-placeholder")},init:function(){e(".bookmify_be_user_appointments").length&&(this.cacheElements(),this.imgToSvg(),this.openCloseAppointment(),this.openDetailsAppointment(),this.doFilter(),this.cancelAppointment(),e.protip())},imgToSvg:function(){e("img.bookmify_be_svg").each(function(){var t=e(this),a=t.attr("class"),i=t.attr("src");e.get(i,function(i){var n=e(i).find("svg");void 0!==a&&(n=n.attr("class",a+" replaced-svg")),n=n.removeAttr("xmlns:a"),t.replaceWith(n)},"xml")})},doFilter:function(){var t=e(".bookmify_be_pagination.user_appointment li a"),i=this;t.off().on("click",function(t){t.preventDefault(),e(".bookmify_be_filter_list").removeClass("opened");var n=e(this),o=n.parent(),s=n.data("page"),r=0;return o.hasClass("prev")?(s=n.parent().parent().find("li.active a").data("page")-1,r=1):o.hasClass("next")&&(s=n.parent().parent().find("li.active a").data("page")+1,r=1),o.hasClass("active")||(a.page=s,i.filterAjaxCall()),1===r&&(a.page=s,i.filterAjaxCall()),!1}),e(".bookmify_be_user_appointments .bookmify_be_filter_list.daterange input").daterangepicker({autoApply:!0,startDate:a.startDate,endDate:a.endDate,locale:{format:i.momentDateFormat,daysOfWeek:i.calendar.daysShort,monthNames:i.calendar.monthsLong,firstDay:parseInt(i.calendar.firstDay)}},function(t,n){a.dateRange=[],a.dateRange.push(t.format("YYYY-MM-DD")+" 00:00:00"),a.dateRange.push(n.format("YYYY-MM-DD")+" 23:59:59"),a.startDate=t,a.endDate=n,a.oldStartDate===a.startDate||a.oldEndDate===a.endDate||e(".bookmify_be_user_appointments .bookmify_be_filter_list.daterange").hasClass("filtered")||(a.filterCount++,i.cache.filters.addClass("filtered"),e(".bookmify_be_user_appointments .bookmify_be_filter_list.daterange").addClass("filtered")),a.oldStartDate===a.startDate&&a.oldEndDate===a.endDate&&(a.filterCount--,0===a.filterCount&&i.cache.filters.removeClass("filtered"),e(".bookmify_be_user_appointments .bookmify_be_filter_list.daterange").removeClass("filtered")),i.filterAjaxCall()}),e(window).on("click",function(){i.cache.filterServiceWrap.removeClass("opened")}),i.cache.filterServiceWrap.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterCustomerWrap.removeClass("opened"),i.cache.filterEmployeeWrap.removeClass("opened"),i.cache.filterStatusWrap.removeClass("opened"),i.cache.filterServiceWrap.addClass("opened")});var n=null;i.cache.filterServiceList.children("div").off().on("click",function(){var t=e(this),o=t.data("id");return t.hasClass("sending")?(t.removeClass("sending"),a.servicesIDs=e.grep(a.servicesIDs,function(e){return e!==o})):(t.addClass("sending"),a.servicesIDs.push(o)),clearTimeout(n),i.checkNewValueForServiceFilterInEmployee(),n=setTimeout(function(){a.page=1,a.filterCount++,i.cache.filters.addClass("filtered"),i.filterAjaxCall(),i.cache.filterServiceWrap.removeClass("opened")},700),!1}),i.cache.filterServiceWrap.find(".icon").off().on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterCustomerWrap.removeClass("opened"),i.cache.filterEmployeeWrap.removeClass("opened"),i.cache.filterStatusWrap.removeClass("opened"),i.cache.filterServiceInput.attr("placeholder",i.cache.filterServiceInputPlaceholder),i.cache.filterServiceInput.siblings(".bookmify_be_new_value").html(""),i.cache.filterServiceWrap.removeClass("ready"),i.cache.filterServiceList.children("div").removeClass("sending"),a.servicesIDs=[],i.cache.filterServiceWrap.removeClass("opened"),a.filterCount--,0===a.filterCount&&i.cache.filters.removeClass("filtered"),i.filterAjaxCall()}),e(window).on("click",function(){i.cache.filterCustomerWrap.removeClass("opened")}),i.cache.filterCustomerWrap.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceWrap.removeClass("opened"),i.cache.filterEmployeeWrap.removeClass("opened"),i.cache.filterStatusWrap.removeClass("opened"),i.cache.filterCustomerWrap.addClass("opened")}),i.cache.filterCustomerInput.off().on("keyup",function(){var t,a,n=e(this).val().toUpperCase(),o=i.cache.filterCustomerList.children(),s=o.children("div.item"),r=0,l=o.find(".no_records");for(""!==n?i.cache.filterCustomerWrap.addClass("ready clear"):i.cache.filterCustomerWrap.removeClass("ready clear"),a=0;a<s.length;a++)((t=s[a].getElementsByTagName("span")[0]).textContent||t.innerText).toUpperCase().indexOf(n)>-1?(s[a].style.display="",r--):(s[a].style.display="none",r++);r!==s.length||l.length?r!==s.length&&o.find(".no_records").remove():o.append('<div class="no_records"><span>'+i.noRecords+"</span></div>")}),i.cache.filterCustomerList.children().children("div").off().on("click",function(){var t=e(this),n=t.data("id"),o=t.find("span").html();return t.hasClass("sending")||(t.addClass("sending"),a.customerID=n,t.siblings().removeClass("sending"),i.cache.filterCustomerInput.attr("placeholder",""),i.cache.filterCustomerInput.attr("value",o),i.cache.filterCustomerWrap.addClass("ready"),i.cache.filterCustomerWrap.removeClass("opened"),a.filterCount++,i.cache.filters.addClass("filtered"),a.page=1,i.filterAjaxCall()),!1}),i.cache.filterCustomerWrap.find(".icon").off().on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceWrap.removeClass("opened"),i.cache.filterEmployeeWrap.removeClass("opened"),i.cache.filterStatusWrap.removeClass("opened"),i.cache.filterCustomerInput.attr("placeholder",i.cache.filterCustomerInputPlaceholder),i.cache.filterCustomerInput.attr("value",""),i.cache.filterCustomerList.children().children("div").removeClass("sending").css("display",""),""!==a.customerID?(a.customerID="",i.filterAjaxCall(),i.cache.filterCustomerWrap.removeClass("opened"),a.filterCount--,0===a.filterCount&&i.cache.filters.removeClass("filtered")):i.cache.filterCustomerInput.frenifyMoveCursorToEnd(),i.cache.filterCustomerWrap.removeClass("ready"),i.cache.filterCustomerWrap.removeClass("clear"),i.cache.filterCustomerList.children().find(".no_records").remove()}),e(window).on("click",function(){i.cache.filterEmployeeWrap.removeClass("opened")}),i.cache.filterEmployeeWrap.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceWrap.removeClass("opened"),i.cache.filterCustomerWrap.removeClass("opened"),i.cache.filterStatusWrap.removeClass("opened"),i.cache.filterEmployeeWrap.addClass("opened")}),i.cache.filterEmployeeInput.off().on("keyup",function(){var t,a,n=e(this).val().toUpperCase(),o=i.cache.filterEmployeeList.children(),s=o.children("div.item"),r=0,l=o.find(".no_records");for(""!==n?i.cache.filterEmployeeWrap.addClass("ready clear"):i.cache.filterEmployeeWrap.removeClass("ready clear"),a=0;a<s.length;a++)((t=s[a].getElementsByTagName("span")[0]).textContent||t.innerText).toUpperCase().indexOf(n)>-1?(s[a].style.display="",r--):(s[a].style.display="none",r++);r!==s.length||l.length?r!==s.length&&o.find(".no_records").remove():o.append('<div class="no_records"><span>'+i.noRecords+"</span></div>")}),i.cache.filterEmployeeList.children().children("div").off().on("click",function(){var t=e(this),n=t.data("id"),o=t.find("span").html();return t.hasClass("sending")||(t.addClass("sending"),a.employeeID=n,t.siblings().removeClass("sending"),i.cache.filterEmployeeInput.attr("placeholder",""),i.cache.filterEmployeeInput.attr("value",o),i.cache.filterEmployeeWrap.addClass("ready"),i.cache.filterEmployeeWrap.removeClass("opened"),a.filterCount++,i.cache.filters.addClass("filtered"),a.page=1,i.filterAjaxCall()),!1}),i.cache.filterEmployeeWrap.find(".icon").off().on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceWrap.removeClass("opened"),i.cache.filterCustomerWrap.removeClass("opened"),i.cache.filterStatusWrap.removeClass("opened"),i.cache.filterEmployeeInput.attr("placeholder",i.cache.filterEmployeeInputPlaceholder),i.cache.filterEmployeeInput.attr("value",""),i.cache.filterEmployeeList.children().children("div").removeClass("sending").css("display",""),""!==a.employeeID?(a.employeeID="",i.filterAjaxCall(),i.cache.filterEmployeeWrap.removeClass("opened"),a.filterCount--,0===a.filterCount&&i.cache.filters.removeClass("filtered")):i.cache.filterEmployeeInput.frenifyMoveCursorToEnd(),i.cache.filterEmployeeWrap.removeClass("ready"),i.cache.filterEmployeeWrap.removeClass("clear"),i.cache.filterEmployeeWrap.children().find(".no_records").remove()}),e(window).on("click",function(){i.cache.filterStatusWrap.removeClass("opened")}),i.cache.filterStatusWrap.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceWrap.removeClass("opened"),i.cache.filterCustomerWrap.removeClass("opened"),i.cache.filterEmployeeWrap.removeClass("opened"),i.cache.filterStatusWrap.addClass("opened")}),i.cache.filterStatusInput.off().on("keyup",function(){var t,a,n=e(this).val().toUpperCase(),o=i.cache.filterStatusList.children(),s=o.children("div.item"),r=0,l=o.find(".no_records");for(""!==n?i.cache.filterStatusWrap.addClass("ready clear"):i.cache.filterStatusWrap.removeClass("ready clear"),a=0;a<s.length;a++)((t=s[a].getElementsByTagName("span")[0]).textContent||t.innerText).toUpperCase().indexOf(n)>-1?(s[a].style.display="",r--):(s[a].style.display="none",r++);r!==s.length||l.length?r!==s.length&&o.find(".no_records").remove():o.append('<div class="no_records"><span>'+i.noRecords+"</span></div>")}),i.cache.filterStatusList.children().children("div").off().on("click",function(){var t=e(this),n=t.data("status"),o=t.find("span").html();return t.hasClass("sending")||(t.addClass("sending"),a.status=n,t.siblings().removeClass("sending"),i.cache.filterStatusInput.attr("placeholder",""),i.cache.filterStatusInput.attr("value",o),i.cache.filterStatusWrap.addClass("ready"),i.cache.filterStatusWrap.removeClass("opened"),a.filterCount++,i.cache.filters.addClass("filtered"),a.page=1,i.filterAjaxCall()),!1}),i.cache.filterStatusWrap.find(".icon").off().on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceWrap.removeClass("opened"),i.cache.filterCustomerWrap.removeClass("opened"),i.cache.filterEmployeeWrap.removeClass("opened"),i.cache.filterStatusInput.attr("placeholder",i.cache.filterStatusInputPlaceholder),i.cache.filterStatusInput.attr("value",""),i.cache.filterStatusList.children().children("div").removeClass("sending").css("display",""),""!==a.status?(a.status="",i.filterAjaxCall(),i.cache.filterStatusWrap.removeClass("opened"),a.filterCount--,0===a.filterCount&&i.cache.filters.removeClass("filtered")):i.cache.filterStatusInput.frenifyMoveCursorToEnd(),i.cache.filterStatusWrap.removeClass("ready"),i.cache.filterStatusWrap.removeClass("clear"),i.cache.filterStatusWrap.children().find(".no_records").remove()}),e(".bookmify_be_user_appointments .bookmify_be_filter_list.reset a").off().on("click",function(t){return t.preventDefault(),t.stopPropagation(),!!i.cache.filters.hasClass("filtered")&&(a.filterCount=0,a.page=1,a.servicesIDs=[],a.customerID="",a.employeeID="",a.status="",a.dateRange=[],a.dateRange.push(a.oldStartDate),a.dateRange.push(a.oldEndDate),a.startDate=a.oldSDate,a.endDate=a.oldEDate,e(".bookmify_be_user_appointments .bookmify_be_filter_list.daterange input").data("daterangepicker").setStartDate(a.oldSDate),e(".bookmify_be_user_appointments .bookmify_be_filter_list.daterange input").data("daterangepicker").setEndDate(a.oldEDate),e(".bookmify_be_user_appointments .bookmify_be_filter_list.daterange").removeClass("filtered"),i.cache.filterServiceWrap.removeClass("opened ready clear"),i.cache.filterCustomerWrap.removeClass("opened ready clear"),i.cache.filterEmployeeWrap.removeClass("opened ready clear"),i.cache.filterStatusWrap.removeClass("opened ready clear"),i.cache.filterStatusInput.attr("placeholder",i.cache.filterStatusInputPlaceholder),i.cache.filterStatusInput.attr("value",""),i.cache.filterStatusList.children().children("div").removeClass("sending").css("display",""),i.cache.filterCustomerInput.attr("placeholder",i.cache.filterCustomerInputPlaceholder),i.cache.filterCustomerInput.attr("value",""),i.cache.filterCustomerList.children().children("div").removeClass("sending").css("display",""),i.cache.filterEmployeeInput.attr("placeholder",i.cache.filterEmployeeInputPlaceholder),i.cache.filterEmployeeInput.attr("value",""),i.cache.filterEmployeeList.children().children("div").removeClass("sending").css("display",""),i.cache.filterServiceInput.attr("placeholder",i.cache.filterServiceInputPlaceholder),i.cache.filterServiceInput.siblings(".bookmify_be_new_value").html(""),i.cache.filterServiceWrap.removeClass("ready"),i.cache.filterServiceList.children("div").removeClass("sending"),i.filterAjaxCall(),i.cache.filters.removeClass("filtered"),!1)})},checkNewValueForServiceFilterInEmployee:function(){if(e.isEmptyObject(a.servicesIDs))this.cache.filterServiceInput.attr("placeholder",this.cache.filterServiceInputPlaceholder),this.cache.filterServiceInput.siblings(".bookmify_be_new_value").html(""),this.cache.filterServiceWrap.removeClass("ready");else{var t="";if(this.cache.filterServiceInput.attr("placeholder",""),a.servicesIDs.length>1){var i=this.cache.filterServiceList.children("div").length;t='<span class="number">'+a.servicesIDs.length+" / "+i+"</span>"}var n='<span class="text">'+this.cache.filterServiceList.find('div[data-id="'+a.servicesIDs[0]+'"]').html()+"</span>";this.cache.filterServiceInput.siblings(".bookmify_be_new_value").html("").html(n+t),this.cache.filterServiceWrap.addClass("ready")}},filterAjaxCall:function(){var t=this,i={action:"ajaxFilterUserAppointmentList",bookmify_page:a.page,bookmify_search:a.search,bookmify_services:a.servicesIDs,bookmify_customer:a.customerID,bookmify_employee:a.employeeID,bookmify_status:a.status,bookmify_daterange:a.dateRange};e.ajax({type:"POST",url:t.ajaxurl,cache:!0,data:i,success:function(e){t.getFilteredAppointmentsList(e)},error:function(){}})},getFilteredAppointmentsList:function(t){var a=e.parseJSON(t),i=e(".bookmify_be_appointments_list");i.html(a.bookmify_be_data);var n=i.find(".bookmify_be_list_item");setTimeout(function(){n.each(function(t,a){setTimeout(function(){e(a).addClass("fadeInTop done")},100*t)})},150),this.init()},miniStatusForAppointments:function(t){var a=this,i=t.find(".bookmify_be_ministatus");i.find(".label").off().on("click",function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked");var t=e(this).closest(".bookmify_be_ministatus");return i.hasClass("opened")?t.hasClass("opened")?t.removeClass("opened"):(i.removeClass("opened"),t.addClass("opened")):t.addClass("opened"),!1}),i.find(".ministatus_dd div").on("click",function(){var i=e(this),n=i.closest(".bookmify_be_ministatus"),o=i.attr("class");n.find("label").attr("class",o).html(i.find("span").html()),n.removeClass("opened");var s=i.closest(".item").data("customer-id");return t.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+s+'"]').removeClass("item_approved item_pending item_canceled item_rejected").addClass("item_"+o),a.recalculateExtraForAllCustomersInAppointments(),a.saveAppointment(),!1}),i.find(".ministatus_dd").on("click",function(e){e.stopPropagation()}),e(window).on("click",function(){i.removeClass("opened")})},numberOfPeopleForAppointments:function(){var t=e(".nano.number_list"),a=e("body > .bookmify_be_popup_form_appointment .ad_customer_list_with_info .detail_holder .no_people input"),i=this;a.off().on("click",function(a){a.preventDefault(),a.stopPropagation();var n=e(this);n.hasClass("input_clicked")?(n.removeClass("input_clicked"),t.removeClass("focused")):(e(".nano").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("*:not(.no_people) input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked"),n.addClass("input_clicked"),t.addClass("focused"),t.css({width:n.outerWidth()+"px"}),new Popper(n,t,{placement:"bottom-start",onUpdate:function(){t.css({width:n.outerWidth()+"px"})}})),i.clickOnNumberList(t)}),i.clickOnNumberList(t),e(window).on("click",function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")})},clickOnNumberList:function(t){var a=this;t.find(".nano-content > div").off().on("click",function(t){t.preventDefault(),t.stopPropagation();var i=e(this).html(),n=e("body > .bookmify_be_popup_form_appointment"),o=n.find(".no_people input.input_clicked"),s=o.closest(".item").data("customer-id");return e(this).hasClass("nodata")||(n.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+s+'"] input[name="people_count"]').val(i),o.val(i),a.recalculateExtraForAllCustomersInAppointments()),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),!1})},removeCustomerItemForAppointment:function(){var t=this,a=e("body > .bookmify_be_popup_form_appointment .ad_customer_list_with_info .item .detail_holder .remover > span"),i=e(".nano.app_customers");a.off().on("click",function(a){a.preventDefault(),a.stopPropagation(),e(".nano").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked");var n=e(this),o=n.closest(".item"),s=n.closest(".bookmify_be_ad_customers"),r=o.data("customer-id"),l=s.find('[name="customer_ids"]').val().split(",");l=e.grep(l,function(e){return e!==r.toString()});var c="";e.each(l,function(e,t){c+=t,c+=","}),c=c.slice(0,-1);var p=s.find('input[name="customer"]'),d=c.split(","),m=p.attr("data-placeholder");if(""!==c){var f="";if(p.attr("placeholder",""),d.length>1){var u=i.find("ul.customers_nano_list li").length;f='<span class="number">'+d.length+" / "+u+"</span>"}var _='<span class="text">'+i.find("input[value="+d[0]+"]").closest("li").find("span.name").html()+"</span>";p.siblings(".bookmify_be_new_value").html("").html(_+f)}else p.attr("placeholder",m),p.siblings(".bookmify_be_new_value").html("");p.siblings('input[name="customer_ids"]').val("").val(d);var v=[];return e("body > .bookmify_be_popup_form_appointment .ad_customer_list_with_info .item").each(function(){var t=e(this),a=t.data("customer-id"),i=t.find('input[name="number_of_people"]').val();r!=a&&(v[a]=i)}),t.removeExtraAndPayment(r),o.remove(),!1})},popperCustomersForAppointments:function(){var t=e(".nano.app_customers"),a=e('body > .bookmify_be_popup_form_appointment input[name="customer"]'),i=t.find('input[type="checkbox"]'),n=this;a.off().on("click",function(o){o.stopPropagation();var s=a.siblings('[name="customer_ids"]').val().split(",");i.prop("checked",!1),e.each(s,function(e,a){t.find('input[type="checkbox"][value="'+a+'"]').prop("checked",!0)}),t=e(".nano.app_customers"),a.hasClass("input_clicked")?(a.removeClass("input_clicked"),t.removeClass("focused")):(e(".nano:not(.app_customers)").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("*:not(.customer) input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked"),a.addClass("input_clicked"),t.addClass("focused"),t.css({width:a.outerWidth()+"px"}),new Popper(a,t,{placement:"bottom-start",onUpdate:function(){t.css({width:a.outerWidth()+"px"})}})),n.clickOnCustomer(a,i,t)}),e(window).on("click",function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),t.on("click",function(e){e.stopPropagation()}),n.checkCustomerIDs(a),n.clearCustomerInput(a,i)},checkCustomerIDs:function(e){var t=e.siblings('input[name="customer_ids"]'),a=e.siblings(".bot_btn");" "===t.val()||""===t.val()?a.removeClass("opened"):a.addClass("opened")},clearCustomerInput:function(t,a){var i=t.attr("data-placeholder"),n=t.siblings(".bot_btn"),o=this;n.off().on("click",function(){return t.siblings('[name="customer_ids"]').val(""),t.siblings(".bookmify_be_new_value").html(""),a.prop("checked",!1),t.attr("placeholder",i),n.removeClass("opened"),t.closest(".bookmify_be_ad_customers").find(".ad_customer_list_with_info").html(""),e(".nano").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked"),o.removeExtraAndPayment("destroy"),!1})},clickOnCustomer:function(t,a,i){var n=this;i.find("ul.customers_nano_list li").off().on("click",function(){var o=e(this),s=o.find('input[type="checkbox"]');s.is(":checked")?s.prop("checked",!1):s.prop("checked",!0),n.checkCustomerIDs(t),n.clickOnCustomerAction(t,i,a,o),n.clearCustomerInput(t,a),n.recalculateExtraForAllCustomersInAppointments(),t.parent().removeClass("required_error"),t.parent().find(".error_note").remove()})},clickOnCustomerAction:function(t,a,i,n){var o=this,s=[];a.find("ul.customers_nano_list li").each(function(){var t=e(this),a=t.find('input[name="customer_id"]').val();t.find('input[type="checkbox"]').is(":checked")?(s=e.grep(s,function(e){return e!==a}),t.addClass("checked"),s.push(t.find('input[name="customer_id"]').val())):(t.removeClass("checked"),s=e.grep(s,function(e){return e!==a}))});var r=s,l=s,c=t.attr("data-placeholder");if(e.isEmptyObject(s))t.attr("placeholder",c),t.siblings(".bookmify_be_new_value").html("");else{var p="";if(t.attr("placeholder",""),s.length>1){var d=a.find("ul.customers_nano_list li").length;p='<span class="number">'+s.length+" / "+d+"</span>"}var m='<span class="text">'+a.find("input[value="+s[0]+"]").closest("li").find("span.name").html()+"</span>";t.siblings(".bookmify_be_new_value").html("").html(m+p)}t.parent().find('input[name="customer_ids"]').val("").val(s),o.filters.customerIDs=s;var f=t.closest(".bookmify_be_ad_customers").find(".ad_customer_list_with_info"),u=f.find(".item"),_=[];u.each(function(){_.push(e(this).data("customer-id"))});var v=[];e.each(_,function(t,a){-1===s.indexOf(a.toString())?v.push(a):s=e.grep(s,function(e){return e!=a})}),e.each(v,function(e,t){f.find('.item[data-customer-id="'+t+'"]').remove()}),e.each(s,function(t,a){var i=e('ul.customers_nano_list input[type="checkbox"][value="'+a+'"]').siblings('input[name="full_name"]').val(),n=e('ul.customers_nano_list input[type="checkbox"][value="'+a+'"]').siblings('input[name="email"]').val(),s='<div class="detail_holder">'+('<div class="status"><div class="bookmify_be_ministatus"><div class="label"><label class="approved">'+o.cache.approvedIcon+'</label></div><div class="ministatus_dd"><div class="approved"><span>'+o.cache.approvedIcon+'</span></div><div class="pending"><span>'+o.cache.pendingIcon+'</span></div><div class="canceled"><span>'+o.cache.canceledIcon+'</span></div><div class="rejected"><span>'+o.cache.rejectedIcon+"</span></div></div></div></div>")+('<div class="no_people"><span class="person_icon">'+o.cache.personIcon+'</span><span class="down_icon">'+o.cache.downIcon+'</span><input type="number" readonly value="1" /></div>')+o.cache.info_remover+"</div>";f.append('<div class="item" data-customer-id="'+a+'"><div class="name_holder"><span class="name">'+i+'</span><span clas="email">'+n+"<span></div>"+s+"</div>")});var h=t.closest(".bookmify_be_appointmentstabs_content").find(".bookmify_be_appointment_extras"),b=h.find(".bookmify_be_extras_customer_appointment"),y=[];b.each(function(){y.push(e(this).data("customer-id"))});var C=[];e.each(y,function(t,a){-1===r.indexOf(a.toString())?C.push(a):r=e.grep(r,function(e){return e!=a})}),e.each(C,function(e,t){h.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+t+'"]').remove()});var k="";e.each(l,function(e,t){k+=t,k+=","}),k=k.slice(0,-1);var g=[];e("body > .bookmify_be_popup_form_appointment .ad_customer_list_with_info .item").each(function(){var t=e(this),a=t.data("customer-id"),i=t.find('input[name="number_of_people"]').val();g[a]=i});var x=t.closest(".bookmify_be_popup_form_appointment"),I=x.find('input[name="employee_id"]').val(),D=x.find('input[name="service_id"]').val(),S=n.find('[name="customer_id"]').val(),A=n.find('[name="full_name"]').val(),w=n.find('[name="email"]').val(),F=n.find('[name="customer_id"]').is(":checked");o.addExtraAndPayment(S,A,w,F,I,D),o.imgToSvg(),o.numberOfPeopleForAppointments(),o.miniStatusForAppointments(x),o.removeCustomerItemForAppointment(),o.checkCustomerIDs(t)},categoryPopperForAppointment:function(){var t=e(".nano.category_list"),a=e('body > .bookmify_be_popup_form_appointment .category_wrap input[type="text"]'),i=this;a.each(function(){var a=e(this),n=a.closest(".bookmify_be_popup_form_appointment"),o=a.parent().find(".bot_btn");e(window).on("click",function(){t.removeClass("focused"),i.cache.allInputs.removeClass("input_clicked")}),t.on("click",function(e){e.stopPropagation()}),a.off().on("click",function(i){i.stopPropagation(),t.css({width:a.outerWidth()+"px"}),a.hasClass("input_clicked")?(a.removeClass("input_clicked"),t.removeClass("focused")):(e(".nano:not(.category_list)").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("*:not(.category_wrap) input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked"),a.addClass("input_clicked"),t.addClass("focused"),new Popper(a,t,{placement:"bottom-start",onUpdate:function(){t.css({width:a.outerWidth()+"px"})}}))}),t.css({width:a.outerWidth()+"px"}),t.find(".nano-content > div").on("click",function(t){t.stopPropagation();var s=e(this).html(),r=e(this).data("category-id");0===r?a.val(""):a.val(s),a.parent().find('input[type="hidden"]').val(r),i.checkFourInputsAppointments(n),i.checkCategoryID(a,o),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),o.on("click",function(){a.val(""),a.parent().find('input[type="hidden"]').val(""),i.checkFourInputsAppointments(n),o.removeClass("opened"),e(".nano").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked")}),i.checkCategoryID(a,o)})},checkCategoryID:function(e,t){" "===e.val()||""===e.val()?t.removeClass("opened"):t.addClass("opened")},servicePopperForAppointment:function(){var t=this,a=e(".nano.service_list"),i=e(".nano.category_list .nano-content > div");e('body > .bookmify_be_popup_form_appointment .service_wrap input[type="text"]').each(function(){var o=e(this),s=o.closest(".bookmify_be_popup_form_appointment"),r=s.find('input[name="category_id"]'),l=r.val(),c=r.siblings("span.bot_btn");e(window).on("click",function(){a.removeClass("focused"),t.cache.allInputs.removeClass("input_clicked")}),a.on("click",function(e){e.stopPropagation()}),o.off().on("click",function(t){t.stopPropagation(),t.preventDefault(),a.css({width:o.outerWidth()+"px"}),o.hasClass("input_clicked")?(o.removeClass("input_clicked"),a.removeClass("focused")):(e(".nano:not(.service_list)").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("*:not(.service_wrap) input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked"),o.addClass("input_clicked"),a.addClass("focused"),new Popper(o,a,{placement:"bottom-start",onUpdate:function(){a.css({width:o.outerWidth()+"px"})}}))}),a.css({width:o.outerWidth()+"px"}),a.find(".nano-content > div").on("click",function(a){a.stopPropagation();var n=e(this).html(),p=e(this).data("service-id");if(0===p?o.val(""):o.val(n),o.parent().find('input[type="hidden"]').val(p),""!==p&&""===l){var m=","+p+",";i.each(function(){var t=e(this),a=","+t.data("service-id")+",";t.addClass("disabled"),a.includes(m)&&(t.removeClass("disabled"),r.val(t.data("category-id")),r.siblings('input[type="text"]').val(t.html()),c.addClass("opened"))})}var f=s.find('input[name="customer_ids"]').val(),u=s.find('input[name="employee_id"]').val(),_=s.find(".ad_customer_list_with_info .item"),v=[];_.each(function(){var t=e(this).data("customer-id"),a=e(this).find("input").val(),i=e(this).find(".bookmify_be_ministatus .label label").attr("class");v.push([t,a,i])}),t.reBuildExtrasAppointment(f,p,u,s,v),t.reBuildPaymentsAppointment(f,p,u,s,v),t.checkFourInputsAppointments(s),t.checkValuesServiceEmployeeDateForTimeSlots(s),t.changeContentOfPopupNumberOfPeopleForAppointment(s),d(),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),o.parent().removeClass("required_error"),o.parent().find(".error_note").remove()});var p=o.parent().find(".bot_btn");function d(){" "===o.val()||""===o.val()?p.removeClass("opened"):p.addClass("opened")}p.on("click",function(){o.val(""),o.parent().find('input[type="hidden"]').val(""),e('body > .bookmify_be_popup_form_appointment .category_wrap input[type="text"]').val(""),e('body > .bookmify_be_popup_form_appointment .category_wrap input[type="text"]').parent().find('input[type="hidden"]').val(""),e('body > .bookmify_be_popup_form_appointment .category_wrap input[type="text"]').parent().find(".bot_btn").removeClass("opened"),t.checkFourInputsAppointments(s),p.removeClass("opened"),n.serviceCapMax="",n.serviceCapMin="",t.callAlertBoxCapacity(),t.removeExtraAndPayment("destroy"),t.changeContentOfPopupNumberOfPeopleForAppointment(s),e(".nano").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked")}),d()})},openCloseAppointment:function(){var t=e(".bookmify_appointment_heading a.bookmify_be_edit"),a=this;t.off().on("click",function(){var t=e(this),i=t.closest(".bookmify_be_appointment_item");if(i.hasClass("bookmify_be_closed_item")||t.parent().hasClass("bookmify_be_closed_btn"))return!1;if(i.hasClass("bookmify_be_open_item")&&t.parent().hasClass("bookmify_be_open_btn")){var n=i.data("entity-id"),o=i.find('input[name="appointment_day"]'),s=i.find('input[name="employee_id"]').val(),r={action:"ajaxQueryEditAppointment",bookmify_data:n};return t.hasClass("loading")||(t.addClass("loading"),i.addClass("loading"),e.ajax({type:"POST",url:a.ajaxurl,cache:!1,data:r,success:function(n){"warning"===e.parseJSON(n).bookmify_be_data?(t.removeClass("loading"),i.removeClass("loading"),setTimeout(function(){e.iaoAlert({msg:a.alertWarningIcon+a.errorEdit,type:"success",alertTime:a.iaoAlertTime,position:a.iaoAlertPosition})},300)):(t.removeClass("loading"),i.removeClass("loading"),a.getRequestedAppointmentPopup(n,i,s,o))},error:function(){}})),!1}})},getRequestedAppointmentPopup:function(t,a,o,s){var r=this,l=e.parseJSON(t),c=l.bookmify_be_data;e("body").addClass("disable_scroll").append(c),e("body > .bookmify_be_popup_form_wrap").addClass("bookmify_be_popup_form_appointment"),s=(a=e("body > .bookmify_be_popup_form_appointment")).find('input[name="appointment_day"]'),o=a.find('input[name="employee_id"]').val(),r.imgToSvg(),r.universalTab(),r.checkFourInputsAppointments(a),r.popperCustomersForAppointments(),r.miniStatusForAppointments(a),r.categoryPopperForAppointment(),r.servicePopperForAppointment(),r.numberOfPeopleForAppointments(),r.appointmentTimePopper(),r.extraQuantity(),r.enableDisableExtraForCustomerInAppointments(),r.doFilter(),i.div1=l.buffy2,i.div2=l.buffy3,i.div3=l.buffy4,n.serviceDuration=parseInt(a.find("input.service_duration").val()),n.serviceCapMax=parseInt(a.find("input.service_max").val()),n.serviceCapMin=parseInt(a.find("input.service_min").val()),a.find("input.service_duration").remove(),a.find("input.service_max").remove(),a.find("input.service_min").remove(),r.changeContentOfPopupNumberOfPeopleForAppointment(a),n.extraDuration=0,r.calculateExtrasDuration(),r.multiDatesPickerAppointment(),r.removeDateFromAppointment(),r.removeCustomerItemForAppointment(),""!==o&&(r.getDaysOffEmployeeForAppointment(o,s),r.removeDateFromAppointment(),r.appointmentTimePopper()),r.cancelItem(),r.saveAppointment(),e("body > .bookmify_be_popup_form_wrap .bookmify_be_ad_emp_loc").addClass("bookmify_be_opacity"),setTimeout(function(){e("body > .bookmify_be_popup_form_wrap").addClass("enable"),r.closersPopup()},10)},calculateExtrasDuration:function(t){var a=e("body > .bookmify_be_popup_form_appointment"),i=a.find(".bookmify_extra_service_item_app"),o=0,s=[];i.each(function(){var t=e(this),a=t.find(".req"),i=parseFloat(t.data("id")),n=t.closest(".bookmify_be_extras_customer_appointment"),o=parseFloat(t.find(".extra_duration").val()),r=parseFloat(t.find('input[name="extra_quantity"]').val());(n.hasClass("item_approved")||n.hasClass("item_pending"))&&a.is(":checked")&&(void 0===s[i]||s[i]<o*r)&&(s[i]=o*r)}),s=s.filter(function(e){return null!=e}),e.each(s,function(e,t){o+=t}),"remove"===t&&n.extraDuration!==o&&(n.extraDuration=o,this.checkValuesServiceEmployeeDateForTimeSlots(a,t)),n.extraDuration=o},universalTab:function(){e(".bookmify_be_tab_wrap").each(function(){var t=e(this);t.find("a.bookmify_be_tab_link").on("click",function(){e(".nano").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked");var a=e(this).parent(),i=a.index();return a.siblings("li").removeClass("active"),a.addClass("active"),t.find(".bookmify_be_tab_pane").removeClass("active"),e(t.find(".bookmify_be_tab_pane")[i]).addClass("active"),!1})})},closerButton:function(){var t=this;e(".bookmify_be_popup_form_wrap.enable").find("span.closer").on("click",function(){t.closePopupForm()})},closerEsc:function(){var t=this;e(document).keyup(function(e){"Escape"===e.key&&t.closePopupForm()})},closersPopup:function(){this.closerEsc(),this.closerButton()},closePopupForm:function(){var t=e(".bookmify_be_popup_form_wrap.enable");e("body").removeClass("disable_scroll"),t.removeClass("enable"),setTimeout(function(){t.remove()},300)},getDaysOffEmployeeForAppointment:function(t,a){var i=this;a.closest(".day_wrap").addClass("waiting");var n={action:"ajaxQuerydayOffsEmployee",bookmify_employee_id:t};e.ajax({type:"POST",url:i.ajaxurl,cache:!1,data:n,success:function(e){i.employeeDayOffsAjaxProcess(e,a),a.closest(".day_wrap").removeClass("waiting")},error:function(){}})},employeeDayOffsAjaxProcess:function(t,a){var i=e.parseJSON(t),n=new Date,o=n.getHours(),s=n.getMinutes(),r=0,l=parseFloat(e(".bookmify_be_mintime_tobooking input").val());l<1?(s+=60*l)>60&&o++:l>=1&&l<24?(o+=l)>=24&&(r="+1d"):r="+"+l/24+"d";var c=i.bookmify_be_time,p=[];e.each(c,function(e,t){7===t&&(t=0),p.push(t)}),a.datepicker("option",{minDate:r,setDate:null,beforeShowDay:function(t){var a=e.datepicker.formatDate("yy-mm-dd",t),n=t.getDay();return[-1===e.inArray(a,i.bookmify_be_data)&&-1===p.indexOf(n)]}})},checkFourInputsAppointments:function(t){var a=t.find('input[name="category_id"]'),i=t.find('input[name="location_id"]'),n=t.find('input[name="service_id"]'),o=t.find('input[name="employee_id"]'),s=a.val(),r=n.val(),l=o.val(),c=i.val(),p=e(".nano.category_list"),d=e(".nano.service_list"),m=e(".nano.employee_list"),f=e(".nano.location_list"),u=p.find(".nano-content > div"),_=d.find(".nano-content > div"),v=m.find(".nano-content > div"),h=f.find(".nano-content > div");if(u.removeClass(),_.removeClass(),v.removeClass(),h.removeClass(),""===s&&""===r&&""===l&&""===c||(u.addClass("disabled"),_.addClass("disabled"),v.addClass("disabled"),h.addClass("disabled")),""!==s&&""===r&&""===l&&""===c&&u.removeClass(),""!==s){var b=p.find('.nano-content > div[data-category-id="'+s+'"]');b.length&&b.addClass("selected")}if(""!==r&&""===s&&""===l&&""===c&&_.removeClass(),""!==r){var y=d.find('.nano-content > div[data-service-id="'+r+'"]');y.length&&y.addClass("selected")}if(""!==l&&""===s&&""===r&&""===c&&v.removeClass(),""!==l){var C=m.find('.nano-content > div[data-employee-id="'+l+'"]');C.length&&C.addClass("selected")}if(""!==c&&""===s&&""===r&&""===l&&h.removeClass(),""!==c){var k=f.find('.nano-content > div[data-location-id="'+c+'"]');k.length&&k.addClass("selected")}if(""!==c){u.addClass("disabled");var g=","+c+",";u.each(function(){var t=e(this);(","+t.data("location-id")+",").includes(g)&&t.removeClass("disabled")})}if(""!==l){u.addClass("disabled");var x=","+l+",";u.each(function(){var t=e(this);(","+t.data("employee-id")+",").includes(x)&&t.removeClass("disabled")})}if(""!==r){u.addClass("disabled");var I=","+r+",";u.each(function(){var t=e(this);(","+t.data("service-id")+",").includes(I)&&t.removeClass("disabled")})}if(""!==c){var D=","+c+",";_.each(function(){var t=e(this),a=","+t.data("location-id")+",";t.addClass("disabled"),a.includes(D)&&t.removeClass("disabled")})}if(""!==l){var S=","+l+",";_.each(function(){var t=e(this),a=","+t.data("employee-id")+",";t.addClass("disabled"),a.includes(S)&&t.removeClass("disabled").addClass("emp_sel")})}if(""!==s&&""===l){_.addClass("disabled");var A=d.find('.nano-content > div[data-category-id="'+s+'"]');A.length&&A.removeClass("disabled")}if(""!==s&&""!==l&&_.each(function(){var t=e(this);t.hasClass("emp_sel")&&parseInt(t.data("category-id"))==s?t.removeClass("disabled"):t.addClass("disabled")}),""!==s){v.addClass("disabled");var w=","+s+",";v.each(function(){var t=e(this);(","+t.data("category-id")+",").includes(w)&&t.removeClass("disabled")})}if(""!==r){v.addClass("disabled");var F=","+r+",";v.each(function(){var t=e(this);(","+t.data("service-id")+",").includes(F)&&t.removeClass("disabled").addClass("enabled")})}if(""!==c&&""!==r){var P=m.find('.nano-content > div[data-location-id="'+c+'"]');v.each(function(){var t=e(this);t.addClass("disabled"),P.length&&t.hasClass("enabled")&&P.removeClass("disabled")})}if(""!==c&&""===r){v.addClass("disabled");var E=m.find('.nano-content > div[data-location-id="'+c+'"]');E.length&&E.removeClass("disabled")}if(""!==s){h.addClass("disabled");var T=","+s+",";h.each(function(){var t=e(this);(","+t.data("category-id")+",").includes(T)&&t.removeClass("disabled")})}if(""!==r){h.addClass("disabled");var W=","+r+",";h.each(function(){var t=e(this);(","+t.data("service-id")+",").includes(W)&&t.removeClass("disabled")})}if(""!==l){h.addClass("disabled");var j=","+l+",";h.each(function(){var t=e(this);(","+t.data("employee-id")+",").includes(j)&&t.removeClass("disabled")})}},multiDatesPickerAppointment:function(){var t=e('body > .bookmify_be_popup_form_appointment .day_wrap input[type="text"]'),a=this;t.each(function(){var t=e(this),i=t.closest(".bookmify_be_popup_form_appointment"),n=i.find('input[name="employee_id"]').val(),o=t.siblings('input[type="hidden"]'),s=t.data("selected-day"),r=t.closest(".day_wrap"),l=r.find("span.bot_btn"),c=new Date,p=c.getHours(),d=c.getMinutes(),m=0,f=parseInt(e(".bookmify_be_mintime_tobooking input").val());f<1?(d+=60*f)>60&&p++:f>=1&&f<24?(p+=f)>=24&&(m="+1d"):m="+"+f/24+"d",""!==n&&(t.datepicker({minDate:m,dateFormat:"yy-mm-dd",altField:o,altFormat:"yy-mm-dd",constrainInput:!1}),t.datepicker("setDate",s),t.off().on("click",function(a){a.stopPropagation(),a.preventDefault(),t.closest(".day_wrap").hasClass("input_clicked")?(t.datepicker("hide"),r.removeClass("input_clicked")):(e(".nano").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("input").removeClass("input_clicked"),t.datepicker("show"),r.addClass("input_clicked"))}),e(window).on("click",function(){r.removeClass("input_clicked")}),t.datepicker().on("change",function(){t.datepicker("hide"),r.removeClass("input_clicked"),t.parent().removeClass("required_error"),t.parent().find(".error_note").remove()})),t.on("change",function(){""!==o&&(l.addClass("opened"),a.checkValuesServiceEmployeeDateForTimeSlots(i))}),""!==o.val()&&(l.addClass("opened"),a.checkValuesServiceEmployeeDateForTimeSlots(i))})},removeDateFromAppointment:function(){e(".bookmify_be_ad_date_time .day_wrap span.bot_btn").on("click",function(){var t=e(this);t.siblings('input[name="appointment_day"]').datepicker("setDate",null),t.removeClass("opened");var a=t.closest(".bookmify_be_ad_date_time").find(".time_wrap"),i=a.find("input"),n=a.find(".bot_btn");i.val(""),n.removeClass("opened"),e(".nano").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked")})},appointmentTimePopper:function(){var t=this,a=e(".nano.appointment_time"),i=a.find(".nano-content > div"),n=i.length,o=e('body > .bookmify_be_popup_form_appointment input[name="appointment_time"]');o.off().on("click",function(s){s.stopPropagation(),s.preventDefault();var r=e(this),l=r.val(),c=r.closest(".bookmify_be_popup_form_appointment"),p=c.find('input[name="employee_id"]').val(),d=c.find('input[name="service_id"]').val(),m=c.find('input[name="appointment_day_hidden"]').val(),f=c.data("entity-id"),u=-((a.height()-20)/2-11);if(r.hasClass("input_clicked"))r.removeClass("input_clicked"),a.removeClass("focused");else{e(".nano:not(.appointment_time)").removeClass("focused"),e(".bookmify_be_ministatus").removeClass("opened"),e("*:not(.time_wrap) input").removeClass("input_clicked"),e(".day_wrap").removeClass("input_clicked"),r.addClass("input_clicked"),a.css({width:r.outerWidth()+"px"}),new Popper(r,a,{placement:"bottom-start",onUpdate:function(){a.css({width:r.outerWidth()+"px"})}}),a.attr("data-entity-id",f),p&&d&&m?i.removeClass("disabled selected"):a.find(".nano-content").html("").html('<div class="nodata">'+t.cache.nothingFound+"</div>");var _=0;if(l)for(var v=0;v<n;v++){var h=i[v];if(e(h).html()===l){e(h).addClass("selected"),_=1;break}e(h).hasClass("disabled")||(u+=27)}else u=0;0===_&&(u=0),e(".scrollbar-inner").scrollTop(u),a.addClass("focused"),i.on("click",function(){var a=e(this),i=a.html();if(!a.hasClass("disabled")&&!a.hasClass("nodata")){var n=e('body > .bookmify_be_popup_form_appointment input[name="appointment_time"]');n.val(i),n.parent().removeClass("required_error"),n.parent().find(".error_note").remove()}e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),t.checkValueForTimeInputInAppointment(o)})}}),e(window).on("click",function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),a.on("click",function(e){e.stopPropagation(),e.preventDefault()}),t.checkValueForTimeInputInAppointment(o)},checkValueForTimeInputInAppointment:function(t){var a=t.val(),i=t.siblings(".bot_btn");a&&i.addClass("opened"),i.off().on("click",function(){e(this).removeClass("opened").siblings("input").val("")})},checkValuesServiceEmployeeDateForTimeSlots:function(t,a){var i=this,o=t.data("entity-id"),s=t.find('input[name="service_id"]').val(),r=t.find('input[name="employee_id"]').val(),l=t.find('input[name="appointment_day_hidden"]').val(),c=t.find(".time_wrap");if(s&&r&&l){c.addClass("waiting");var p=new Date,d=parseFloat(e(".bookmify_be_mintime_tobooking input").val()),m=p.getHours(),f=p.getMinutes(),u=(new Date(l).getTime()-p.getTime())/864e5;d<1?(f+=60*d)>=60&&(m++,f-=60):d>=1&&d<24&&(m+=d),o||(o=0);var _={action:"ajaxQueryTimeSlotsAppointment",serID:s,empID:r,dateVal:l,selDayBetween:Math.floor(u)+1,newHours:m,newMinutes:f,appID:o,extraDuration:n.extraDuration};e.ajax({type:"POST",url:i.ajaxurl,cache:!1,data:_,success:function(e){i.timeSlotsAppointmentAjaxProcess(e),c.removeClass("waiting"),"remove"===a&&(c.find(".required_field").val(""),c.find(".bot_btn").removeClass("opened"))},error:function(){}})}},timeSlotsAppointmentAjaxProcess:function(t){var a=e.parseJSON(t).bookmify_be_data,i=e(".nano.appointment_time .nano-content");""===a?i.html("").html('<div class="nodata">'+this.cache.nothingFound+"</div>"):i.html("").html(a),this.appointmentTimePopper()},changeContentOfPopupNumberOfPeopleForAppointment:function(t){var a=t.find('input[name="service_id"]').val(),i=t.find('input[name="employee_id"]').val(),o=e(".nano.number_list .nano-content");if(a&&i){for(var s="",r=1;r<n.serviceCapMax+1;r++)s+="<div>"+r+"</div>";""===s?o.html("").html('<div class="nodata">'+this.cache.nothingFound+"</div>"):o.html("").html(s)}},extraQuantity:function(){var t=this;e("body > .bookmify_be_popup_form_appointment .bookmify_be_quantity").each(function(){var a=e(this),i=a.find('input[type="number"]'),n=a.find(".increase"),o=a.find(".decrease"),s=i.attr("min"),r=i.attr("max");a.hasClass("disabled")||(n.off().on("click",function(){var e,n=parseFloat(i.val());return n>=r?(e=n,!1):(e=n+1,a.find("input").val(e),a.find("input").trigger("change"),t.recalculateExtraForAllCustomersInAppointments(),t.calculateExtrasDuration("remove"),!1)}),o.off().on("click",function(){var e,n=parseFloat(i.val());return n<=s?(e=n,!1):(e=n-1,a.find("input").val(e),a.find("input").trigger("change"),t.recalculateExtraForAllCustomersInAppointments(),t.calculateExtrasDuration("remove"),!1)}))})},enableDisableExtraForCustomerInAppointments:function(){var t=this;e("body > .bookmify_be_popup_form_appointment").find(".bookmify_extra_service_item_app").each(function(){var a=e(this),i=a.find(".bookmify_be_quantity"),n=a.find('input[type="checkbox"]'),o=a.find("label");n.on("change",function(){return n.is(":checked")?(i.removeClass("disabled"),a.addClass("active")):(i.addClass("disabled"),a.removeClass("active")),t.extraQuantity(),t.recalculateExtraForAllCustomersInAppointments(),t.calculateExtrasDuration("remove"),!1}),o.off().on("click",function(){return n.is(":checked")?(n.prop("checked",!1),i.addClass("disabled"),a.removeClass("active")):(n.prop("checked",!0),i.removeClass("disabled"),a.addClass("active")),t.extraQuantity(),t.recalculateExtraForAllCustomersInAppointments(),t.calculateExtrasDuration("remove"),!1})})},recalculateExtraForAllCustomersInAppointments:function(){var t,a=this,i=e("body > .bookmify_be_popup_form_appointment"),n=i.find(".bookmify_be_appointment_extras"),o=n.find(".bookmify_be_extras_customer_appointment"),s=n.find(".total_price .price span"),r=n.find('input[name="total_price"]'),l=n.find(".extra_price .price span"),c=n.find('input[name="total_extra"]'),p=n.find(".service_price .price span"),d=n.find('input[name="total_service"]'),m=0,f=0,u=i.find(".bookmify_be_appointment_payments");o.each(function(){var i=e(this);if(i.hasClass("item_approved")||i.hasClass("item_pending")){var n=i.data("customer-id");t=0;var o=i.find(".bookmify_extra_service_item_app"),s=i.find('input[name="subtotal_value"]'),r=i.find(".sub_price"),l=parseFloat(i.find('input[name="service_price_for_customer"]').val()),c=parseFloat(i.find('input[name="people_count"]').val());o.each(function(){var i=e(this),n=i.find(".req"),o=parseFloat(i.find('input[name="extra_quantity"]').val()),s=parseFloat(i.find('input[name="extra_price"]').val());n.is(":checked")&&(t+=s*o*c),i.find(".price_span").html(a.integerToPriceFormatFunction(s*o*c))}),s.val(t),r.html(a.integerToPriceFormatFunction(t)),f+=l*c;var p=u.find('[data-customer-id="'+n+'"]');p.length&&(p.find('input[name="extra_total"]').val(t),p.find(".extra_price").html(a.integerToPriceFormatFunction(t)),p.find('input[name="service_total"]').val(l*c),p.find(".service_price").html(a.integerToPriceFormatFunction(l*c)),p.find('input[name="sub_total"]').val(t+l*c),p.find(".sub_price").html(a.integerToPriceFormatFunction(t+l*c))),m+=t,t=0}}),0===o.length?u.each(function(){var t=e(this),i=parseFloat(t.find('input[name="service_price_for_customer"]').val())*parseFloat(t.find('input[name="people_count"]').val());t.find('input[name="extra_total"]').val(0),t.find(".extra_price").html(a.integerToPriceFormatFunction(0)),t.find('input[name="service_total"]').val(i),t.find(".service_price").html(a.integerToPriceFormatFunction(i)),t.find('input[name="sub_total"]').val(i),t.find(".sub_price").html(a.integerToPriceFormatFunction(i))}):(p.html(a.integerToPriceFormatFunction(f)),d.val(f),l.html(a.integerToPriceFormatFunction(m)),c.val(m),m+=f,s.html(a.integerToPriceFormatFunction(m)),r.val(m)),m=0,t=0},integerToPriceFormatFunction:function(t){var a,i,n,o,s=e(".bookmify_be_price_hidden"),r=s.find(".currency_format").val(),l=s.find(".currency_position").val(),c=s.find(".price_format").val(),p=parseFloat(s.find(".price_decimal").val());switch(c){default:case"cd":n=".",o=",";break;case"dc":n=",",o=".";break;case"sd":n=".",o=" ";break;case"sc":n=",",o=" "}isNaN(p=Math.abs(p))&&(p=2),(i=(a=parseInt(t=(+t||0).toFixed(p))+"").length)>3?i%=3:i=0;var d=(i?a.substr(0,i)+o:"")+a.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+o)+(p?n+Math.abs(t-a).toFixed(p).replace(/-/,0).slice(2):"");switch(l){default:case"left":d=r+d;break;case"lspace":d=r+" "+d;break;case"right":d+=r;break;case"rspace":d=d+" "+r}return d},reBuildExtrasAppointment:function(t,a,i,n,o){var s=this,r=n.find(".bookmify_be_appointment_extras");if(""===a||""===i)r.html(s.cache.CES);else{var l={action:"ajaxQueryGetExtrasOfServiceForAppointment",customerIDs:t,serviceID:a,employeeID:i,customerData:o};e.ajax({type:"POST",url:s.ajaxurl,cache:!1,data:l,success:function(e){s.reBuildExtrasAppointmentAjaxProcess(e,r,n),s.imgToSvg(),s.enableDisableExtraForCustomerInAppointments(),s.extraQuantity()},error:function(){}})}},reBuildExtrasAppointmentAjaxProcess:function(t,a,o){var s=e.parseJSON(t),r=s.bookmify_be_data;a.html(r),i.div1=s.buffy2,i.div2=s.buffy3,n.serviceDuration=parseInt(s.duration),n.serviceCapMax=parseInt(s.max),n.serviceCapMin=parseInt(s.min),""!==n.serviceCapMax&&""!==n.serviceCapMin&&e(".bookmify_be_popup_form_wrap .ad_customers_info").removeClass("danger").html("<label>"+this.minCapacity+'</label><span class="min">'+n.serviceCapMin+"</span><label>"+this.maxCapacity+'</label><span class="max">'+n.serviceCapMax+"</span>");e(".bookmify_be_popup_form_wrap .ad_customer_list_with_info .item").each(function(){var t=e(this),a=parseInt(t.find("input").val()),i=e(this).data("customer-id");a>n.serviceCapMax&&(t.find("input").val(n.serviceCapMax),e('.bookmify_be_extras_customer_appointment[data-customer-id="'+i+'"] input[name="people_count"]').val(n.serviceCapMax),0)}),this.recalculateExtraForAllCustomersInAppointments(),this.changeContentOfPopupNumberOfPeopleForAppointment(o)},reBuildPaymentsAppointment:function(t,a,i,n,o){var s=this,r=n.find(".bookmify_be_appointment_payments");if(""===a||""===i)r.html(s.cache.CES);else{var l={action:"ajaxQueryGetPaymentsCustomersForAppointment",customerIDs:t,serviceID:a,employeeID:i,customerData:o};e.ajax({type:"POST",url:s.ajaxurl,cache:!1,data:l,success:function(e){s.reBuildPaymentsAppointmentAjaxProcess(e,r)},error:function(){}})}},reBuildPaymentsAppointmentAjaxProcess:function(t,a){var n=e.parseJSON(t),o=n.bookmify_be_data;a.html(o),i.div3=n.buffy4},removeExtraAndPayment:function(t){var a=e("body > .bookmify_be_popup_form_appointment");"destroy"===t?(a.find(".bookmify_be_appointment_extras").html(this.cache.CES),a.find(".bookmify_be_customer_payments_list").html(this.cache.CES)):(a.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+t+'"]').remove(),a.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+t+'"]').remove(),0===a.find(".bookmify_be_extras_customer_appointment").length&&(a.find(".bookmify_be_appointment_extras").html(this.cache.CES),a.find(".bookmify_be_ad_customers .ad_customers_list .customer span.bot_btn").removeClass("opened")));this.recalculateExtraForAllCustomersInAppointments(),this.enableDisableExtraForCustomerInAppointments()},addExtraAndPayment:function(t,a,n,o,s,r){if(""!==s&&""!==r){var l=i.div1,c=i.div2,p=i.div3,d=e("body > .bookmify_be_popup_form_appointment"),m=d.find(".bookmify_be_appointment_extras"),f=d.find(".bookmify_be_appointment_payments");if(""!==l)if(m.find(".bookmify_be_extras_customer_appointment").length)if(!1===o)m.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+t+'"]').remove();else{m.find(".bookmify_be_customer_extras_list").append(l);var u=m.find(".bookmify_be_customer_extras_list .bookmify_be_extras_customer_appointment:last");u.attr("data-customer-id",t),u.find(".name_holder .name").html(a),u.find(".name_holder .email").html(n)}else if(!1===o)m.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+t+'"]').remove();else{m.html('<div class="bookmify_be_customer_extras_list">'+l+"</div>"+c);var _=m.find(".bookmify_be_customer_extras_list .bookmify_be_extras_customer_appointment:last");_.attr("data-customer-id",t),_.find(".name_holder .name").html(a),_.find(".name_holder .email").html(n)}else m.html(this.cache.noExtras);if(f.find(".bookmify_be_extras_customer_appointment").length)if(!1===o)f.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+t+'"]').remove();else{f.find(".bookmify_be_customer_payments_list").append(p);var v=f.find(".bookmify_be_customer_payments_list .bookmify_be_extras_customer_appointment:last");v.attr("data-customer-id",t),v.find(".name_holder .name").html(a),v.find(".name_holder .email").html(n)}else if(!1===o)f.find('.bookmify_be_extras_customer_appointment[data-customer-id="'+t+'"]').remove();else{f.html('<div class="bookmify_be_customer_payments_list">'+p+"</div>");var h=f.find(".bookmify_be_customer_payments_list .bookmify_be_extras_customer_appointment:last");h.attr("data-customer-id",t),h.find(".name_holder .name").html(a),h.find(".name_holder .email").html(n)}if(0===d.find(".bookmify_be_extras_customer_appointment").length)return this.removeExtraAndPayment("destroy"),!1;this.recalculateExtraForAllCustomersInAppointments(),this.enableDisableExtraForCustomerInAppointments()}},cancelItem:function(){var t=this;e(".bookmify_be_popup_form_button a.cancel").off().on("click",function(){return t.closePopupForm(),!1})},saveAppointment:function(){var t=e(".bookmify_be_popup_form_appointment .bookmify_be_popup_form_button a.save"),a=this;t.off().on("click",function(){var t=e(this),i=t.closest(".bookmify_be_popup_form_appointment"),o=i.data("entity-id"),s=0,r=0,l=i.find(".bookmify_be_appointmentstabs_wrap > .bookmify_be_link_tabs"),c=i.find(".bookmify_be_appointmentstabs_wrap > .bookmify_be_content_tabs");if(i.find(".required_field").each(function(){var t=e(this);""===t.val()&&(t.parent().find(".error_note").remove(),t.parent().addClass("required_error").append(a.errorField),s++)}),0!==s)return 0!==l.find("li.active").index()&&(l.find("li.active").removeClass("active"),c.children(".bookmify_be_tab_pane.active").removeClass("active"),l.find("li:first").addClass("active"),c.children(".bookmify_be_tab_pane:first").addClass("active"),r=50),setTimeout(function(){a.scrollToTop(500)},r),!1;var p=0,d=0,m=0,f=0,u="pending";if(i.find(".ad_customer_list_with_info .item").each(function(){var t=e(this),a=t.find(".bookmify_be_ministatus .label label").attr("class"),i=parseInt(t.find("input").val());"approved"===a?(d+=i,0):"pending"===a?0:"canceled"===a?m++:f++,p++}),0!==d&&d>n.serviceCapMax)return i.find(".ad_customers_info").addClass("danger"),0!==l.find("li.active").index()&&(l.find("li.active").removeClass("active"),c.children(".bookmify_be_tab_pane.active").removeClass("active"),l.find("li:first").addClass("active"),c.children(".bookmify_be_tab_pane:first").addClass("active"),r=50),setTimeout(function(){a.scrollToTop(500)},r),!1;i.find(".ad_customers_info").removeClass("danger"),u="approved",0!==d&&d<n.serviceCapMin&&(u="pending"),0===d&&(u="pending"),p===f&&(u="rejected"),p===m&&(u="canceled"),t.addClass("await");var _=i.find(".bookmify_be_appointment_details"),v={};v.ID=parseInt(o),v.serID=parseInt(_.find("input[name='service_id']").val()),v.empID=parseInt(_.find("input[name='employee_id']").val()),v.dateApp=_.find("input[name='appointment_day_hidden']").val(),v.timeApp=_.find("input[name='appointment_time']").val(),v.checked=!0===_.find(".notify .req").prop("checked")?"public":"private",v.info=_.find("textarea").val();var h=i.find(".bookmify_be_appointment_extras .bookmify_be_extras_customer_appointment"),b=i.find(".bookmify_be_appointment_payments .bookmify_be_extras_customer_appointment"),y=[],C="no";h.length?(h.each(function(){var t={},a=e(this);t.ID=parseInt(a.data("customer-id")),t.serPrice=parseFloat(a.find("input[name='service_price_for_customer']").val()),t.peopleCount=parseInt(a.find("input[name='people_count']").val()),t.status=_.find('.ad_customer_list_with_info .item[data-customer-id="'+t.ID+'"] .bookmify_be_ministatus .label label').attr("class"),t.extras=[],a.find(".bookmify_extra_service_item_app.active").each(function(){var a=e(this),i={},n=a.data("id"),o=parseInt(a.find("input[name='extra_quantity']").val()),s=parseFloat(a.find("input[name='extra_price']").val());i.ID=n,i.quantity=o,i.price=s,t.extras.push(i)}),y.push(t)}),C="yes"):b.each(function(){var t={},a=e(this);t.ID=parseInt(a.data("customer-id")),t.serPrice=parseFloat(a.find("input[name='service_price_for_customer']").val()),t.peopleCount=parseInt(a.find("input[name='people_count']").val()),t.status=_.find('.ad_customer_list_with_info .item[data-customer-id="'+t.ID+'"] .bookmify_be_ministatus .label label').attr("class"),y.push(t)});var k={action:"ajaxQueryEditUserAppointment",details:JSON.stringify(v),allCustomers:JSON.stringify(y),haveExtras:C,duration:parseInt(n.serviceDuration+n.extraDuration),status:u,do:1};return e.ajax({type:"POST",url:a.ajaxurl,cache:!1,data:k,success:function(e){t.removeClass("await"),a.getUpdatedAppointmentList(e)},error:function(){}}),!1})},getUpdatedAppointmentList:function(t){var a=this,i=e.parseJSON(t),n=e(".bookmify_be_appointments_list");if(a.closePopupForm(),1===i.hack)setTimeout(function(){e.iaoAlert({msg:a.alertWarningIcon+a.hackText,type:"success",alertTime:a.iaoAlertTime,position:a.iaoAlertPosition})},300);else{setTimeout(function(){e.iaoAlert({msg:a.alertSuccessIcon+a.savedText,type:"success",alertTime:a.iaoAlertTime,position:a.iaoAlertPosition})},300),n.html(i.bookmify_be_data);var o=n.find(".bookmify_be_list_item");setTimeout(function(){o.each(function(t,a){setTimeout(function(){e(a).addClass("fadeInTop done")},100*t)})},150)}a.init()},scrollToTop:function(t){e(".bookmify_be_popup_form_wrap").animate({scrollTop:0},t)},callAlertBoxCapacity:function(){e(".bookmify_be_popup_form_wrap .ad_customers_info").addClass("danger").html(this.clearCapacity)},openDetailsAppointment:function(){var t=this;e(".bookmify_appointment_heading a.bookmify_be_more").off().on("click",function(a){a.preventDefault();var i=e(this),n=i.data("entity-id"),o=i.parents(".bookmify_be_list_item"),s={action:"ajaxQueryUserDetailsAppointment",bookmify_data:n};return i.hasClass("await")||(i.addClass("await"),o.addClass("loading"),e.ajax({type:"POST",url:t.ajaxurl,cache:!1,data:s,success:function(e){i.removeClass("await"),o.removeClass("loading"),t.getRequestedAppointmentDetailsPopup(e)},error:function(){}})),!1})},getRequestedAppointmentDetailsPopup:function(t){var a=e.parseJSON(t).bookmify_be_data;e("body").addClass("disable_scroll").append(a),e("body > .bookmify_be_popup_form_wrap").addClass("bookmify_be_popup_form_appointment"),e("body > .bookmify_be_popup_form_wrap").addClass("enable"),this.closersPopup(),this.imgToSvg(),this.universalTab()},cancelAppointment:function(){var t=e(".bookmify_be_appointments_list .bookmify_be_cancel"),a=this;t.off().on("click",function(){e(".bookmify_be_filter_list").removeClass("opened");var t=e(this),i=t.parents(".bookmify_be_list_item"),n=i.data("entity-id");return!i.hasClass("bookmify_be_closed_item")&&!t.parent().hasClass("bookmify_be_closed_btn")&&(i.hasClass("bookmify_be_open_item")&&t.parent().hasClass("bookmify_be_open_btn")?(t.addClass("clicked"),a.confirmCancelAppointment(i,n,t),!1):void 0)})},confirmCancelAppointment:function(t,a,i){var n=e("#bookmify_be_confirm"),o=n.find("a.yes"),s=n.find("a.no"),r=this;n.addClass("opened"),o.off().on("click",function(o){return o.preventDefault(),i.removeClass("clicked"),i.addClass("await"),i.addClass("loading"),t.addClass("loading"),e.ajax({type:"POST",url:r.ajaxurl,cache:!1,data:{action:"ajaxQueryCancelAppointment",ID:a},success:function(a){"warning"===e.parseJSON(a).error?(i.removeClass("await loading"),t.parent().removeClass("opened"),t.removeClass("loading"),setTimeout(function(){e.iaoAlert({msg:r.alertWarningIcon+r.errorCancel,type:"success",alertTime:r.iaoAlertTime,position:r.iaoAlertPosition})},300)):(i.removeClass("await loading"),t.parent().removeClass("opened"),t.removeClass("loading").addClass("bookmify_be_closed_item"),i.parent().addClass("bookmify_be_closed_btn"),t.find(".appointment_price span").html(r.integerToPriceFormatFunction(0)),t.find(".appointment_status").removeClass("approved pending").addClass("canceled").find("span").html('<span class="icon">'+r.cache.canceledIcon+'</span><span class="text">'+r.cache.canceledText+"</span></span>"),setTimeout(function(){e.iaoAlert({msg:r.alertSuccessIcon+r.canceledText,type:"success",alertTime:r.iaoAlertTime,position:r.iaoAlertPosition})},300),r.init())},error:function(){}}),n.removeClass("opened"),!1}),s.on("click",function(){return n.removeClass("opened"),i.removeClass("clicked"),!1}),e(document).keydown(function(e){if(27===e.keyCode)return n.removeClass("opened"),i.removeClass("clicked"),!1})}};e(document).ready(function(){o.init()})}(jQuery);